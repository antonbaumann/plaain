(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,n){e.exports=n(499)},290:function(e,t){},292:function(e,t){},324:function(e,t){},325:function(e,t){},394:function(e,t){},491:function(e,t,n){},497:function(e,t,n){},498:function(e,t,n){},499:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(214),o=n.n(a),c=n(37),u=n(27),s=n(216),l=n(73),p=n(126),f=n.n(p),h=n(8),m=n(1),d=n(2),v=n(217),b=function(){function e(){Object(m.a)(this,e),this._userAgentApplication=new v.UserAgentApplication(e.config.clientID,"https://login.microsoftonline.com/common",null)}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.silentLogIn().then(function(t){return{token:t,user:e.userAgentApplication.getUser()}})}},{key:"silentLogIn",value:function(){var t=this;return this.userAgentApplication.acquireTokenSilent(e.config.graphScopes).then(function(e){return e}).catch(function(){return t.popupLogIn()})}},{key:"popupLogIn",value:function(){var t=this;return this.userAgentApplication.loginPopup(e.config.graphScopes).then(function(){return t.userAgentApplication.acquireTokenSilent(e.config.graphScopes).then(function(e){return e}).catch(function(){return t.userAgentApplication.acquireTokenPopup(e.config.graphScopes).then(function(e){return e})})})}},{key:"userAgentApplication",get:function(){return this._userAgentApplication}}]),e}();b.config={clientID:"c06abdd7-3e36-4e51-9ecf-8e304a3fe37f",graphScopes:["user.read","files.read.all"]};var y=b,O=n(3),w=n.n(O),g=n(6),j="indexed",k="fetched",E="movie",_="show",x="season",I="episode",N="source",S="caption",D=["mp4","m4v","mkv","webm"],C=["vtt"],P=n(218),A=function(){function e(t){Object(m.a)(this,e),this._client=P.Client.init({authProvider:function(e){return e(null,t)}})}return Object(d.a)(e,[{key:"movies",value:function(){return this.client.api("/me/drive/root:/Plaain/Movies:/children").get()}},{key:"shows",value:function(){return this.client.api("/me/drive/root:/Plaain/Shows:/children").get()}},{key:"children",value:function(e){return this.client.api("/me/drive/items/".concat(e,"/children")).get()}},{key:"client",get:function(){return this._client}}]),e}(),U=function(){function e(t,n){Object(m.a)(this,e),this._oneDrive=t,this._folderId=n}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.oneDrive.children(this.folderId).then(function(t){return t.value.map(function(t){return e.index(t)}).filter(function(e){return null!=e})})}},{key:"index",value:function(t){var n=e.fileType(t.name);return null==t.file||null==n?null:{id:t.id,type:n,name:t.name,extension:e.fileExtension(t.name),information:e.fileInformation(t.name),mimeType:t.file.mimeType,url:t["@microsoft.graph.downloadUrl"]}}},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"folderId",get:function(){return this._folderId}}],[{key:"fileType",value:function(t){return D.includes(e.fileExtension(t))?N:C.includes(e.fileExtension(t))?S:null}},{key:"fileExtension",value:function(e){return e.split(".").pop()}},{key:"fileInformation",value:function(e){return e.split(".").shift()}}]),e}(),L=function(){function e(t){Object(m.a)(this,e),this._oneDrive=new A(t)}return Object(d.a)(e,[{key:"perform",value:function(){var e=Object(g.a)(w.a.mark(function e(){var t=this;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,this.oneDrive.movies().then(function(e){return e.value.map(function(e){return t.index(e)})});case 3:return e.t1=e.sent,e.t2=function(e){return e.filter(function(e){return null!=e})},e.next=7,e.t0.all.call(e.t0,e.t1).then(e.t2);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"index",value:function(){var e=Object(g.a)(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,new U(this.oneDrive,t.id).perform();case 4:return n=e.sent,e.abrupt("return",{type:E,state:j,id:t.id,name:t.name,path:"/movies/".concat(t.id),files:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}}]),e}(),T=function(){function e(t){Object(m.a)(this,e),this._oneDrive=new A(t)}return Object(d.a)(e,[{key:"perform",value:function(){var e=Object(g.a)(w.a.mark(function e(){var t=this;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,this.oneDrive.shows().then(function(e){return e.value.map(function(e){return t.index(e)})});case 3:return e.t1=e.sent,e.t2=function(e){return e.filter(function(e){return null!=e})},e.next=7,e.t0.all.call(e.t0,e.t1).then(e.t2);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"index",value:function(){var e=Object(g.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",{type:_,state:j,id:t.id,name:t.name,path:"/shows/".concat(t.id)});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}}]),e}(),M=n(92),q=function(){function e(t,n){Object(m.a)(this,e),this._oneDrive=new A(t),this._showIds=n}return Object(d.a)(e,[{key:"perform",value:function(){var e=Object(g.a)(w.a.mark(function e(){var t,n=this;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=(t=[]).concat,e.t1=t,e.t2=M.a,e.next=5,Promise.all(this.showIds.map(function(e){return n.performForShow(e)}).filter(function(e){return null!=e}));case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.abrupt("return",e.t0.apply.call(e.t0,e.t1,e.t4));case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"performForShow",value:function(){var e=Object(g.a)(w.a.mark(function e(t){var n=this;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,this.oneDrive.children(t).then(function(e){return e.value.map(function(e){return n.index(e,t)})});case 3:return e.t1=e.sent,e.next=6,e.t0.all.call(e.t0,e.t1);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"index",value:function(){var e=Object(g.a)(w.a.mark(function e(t,n){var r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder&&!Number.isNaN(t.name)){e.next=2;break}return e.abrupt("return",null);case 2:return r=Number.parseInt(t.name),e.abrupt("return",{type:x,state:j,id:t.id,seasonNumber:r,showId:n,path:"/seasons/".concat(r)});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"showIds",get:function(){return this._showIds}}]),e}(),R=function(){function e(t,n){Object(m.a)(this,e),this._oneDrive=new A(t),this._seasonIds=n}return Object(d.a)(e,[{key:"perform",value:function(){var e=Object(g.a)(w.a.mark(function e(){var t,n=this;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=(t=[]).concat,e.t1=t,e.t2=M.a,e.next=5,Promise.all(this.seasonIds.map(function(e){return n.performForSeason(e)}).filter(function(e){return null!=e}));case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.abrupt("return",e.t0.apply.call(e.t0,e.t1,e.t4));case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"performForSeason",value:function(){var e=Object(g.a)(w.a.mark(function e(t){var n=this;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,this.oneDrive.children(t).then(function(e){return e.value.map(function(e){return n.index(e,t)})});case 3:return e.t1=e.sent,e.next=6,e.t0.all.call(e.t0,e.t1);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"index",value:function(){var e=Object(g.a)(w.a.mark(function e(t,n){var r,i;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder&&!Number.isNaN(t.name)){e.next=2;break}return e.abrupt("return",null);case 2:return r=Number.parseInt(t.name),e.next=5,new U(this.oneDrive,t.id).perform();case 5:return i=e.sent,e.abrupt("return",{type:I,state:j,id:t.id,episodeNumber:r,files:i,seasonId:n,path:"/episodes/".concat(r)});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"seasonIds",get:function(){return this._seasonIds}}]),e}(),W=n(54),V=n.n(W),F=n(266),G=function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,[{key:"findMovie",value:function(){var t=Object(g.a)(w.a.mark(function t(n){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",F(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/search/movie"),qs:Object(h.a)({},e.config.qs,{query:n})})).then(function(e){return e.results.length<1?null:e.results[0].id}));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"findShow",value:function(){var t=Object(g.a)(w.a.mark(function t(n){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",F(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/search/tv"),qs:Object(h.a)({},e.config.qs,{query:n})})).then(function(e){return e.results.length<1?null:e.results[0].id}));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"movie",value:function(){var t=Object(g.a)(w.a.mark(function t(n){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",F(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/movie/").concat(n)})));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"movieCredits",value:function(){var t=Object(g.a)(w.a.mark(function t(n){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",F(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/movie/").concat(n,"/credits")})));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"show",value:function(){var t=Object(g.a)(w.a.mark(function t(n){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",F(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n)})));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"season",value:function(){var t=Object(g.a)(w.a.mark(function t(n,r){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",F(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r)})));case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"seasonCredits",value:function(){var t=Object(g.a)(w.a.mark(function t(n,r){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",F(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r,"/credits")})));case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"episode",value:function(){var t=Object(g.a)(w.a.mark(function t(n,r,i){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",F(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r,"/episode/").concat(i)})));case 3:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()}],[{key:"rateLimiting",value:function(){var e=Object(g.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){return setTimeout(e,250)});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}();G.config={qs:{api_key:"7a10886d19bdc8b264b9d570eaf54e68",language:"en-US"},headers:{"User-Agent":"Request-Promise"},json:!0},G.base_uri="https://api.themoviedb.org/3";var B=G,H=function(){function e(t){Object(m.a)(this,e),this._string=t}return Object(d.a)(e,[{key:"perform",value:function(){return this.string.toLowerCase().replace(/\s/g,"+")}},{key:"string",get:function(){return this._string}}]),e}(),X=function(){function e(t,n){Object(m.a)(this,e),this._movie={id:t,name:n},this._tmdb=new B}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.tmdb.findMovie(this.movie.name).then(function(t){return e.fetch(t)})}},{key:"fetch",value:function(){var e=Object(g.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.movie.tmdbId=t,e.next=3,Promise.all([this.fetchDetails(),this.fetchCredits()]);case 3:return e.next=5,this.getPosterColor();case 5:return e.abrupt("return",this.movie);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.movie(this.movie.tmdbId).then(function(t){e.movie.state=k,e.movie.backdropUrl="https://image.tmdb.org/t/p/original".concat(t.backdrop_path),e.movie.overview=t.overview,e.movie.posterUrl="https://image.tmdb.org/t/p/original".concat(t.poster_path),e.movie.releaseDate=t.release_date,e.movie.runtime=t.runtime,e.movie.name=t.title,e.movie.trailerLink="https://www.youtube.com/results?search_query=".concat(new H(e.movie.name).perform(),"+official+trailer")})}},{key:"fetchCredits",value:function(){var e=this;return this.tmdb.movieCredits(this.movie.tmdbId).then(function(t){e.movie.cast=t.cast.map(function(e){return{character:e.character,name:e.name}}),e.movie.crew=t.crew.map(function(e){return{job:e.job,name:e.name}})})}},{key:"getPosterColor",value:function(){var e=this;return V()(this.movie.posterUrl,{scale:.1}).then(function(t){e.movie.posterColor=t[0].color})}},{key:"movie",get:function(){return this._movie}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),J=n(45),z=function(e){return e.movies},Y=function e(t){return function(n,r){var i=function(e){return Object(J.a)(z,function(t){return t[e]})}(t)(r());new X(i.id,i.name).perform().then(function(e){n($(e))}).catch(function(){return n(e(t))})}},$=function(e){return{type:"UPDATE_MOVIE",payload:e}},K=function(){function e(t,n){Object(m.a)(this,e),this._show={id:t,name:n},this._tmdb=new B}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.tmdb.findShow(this.show.name).then(function(t){return e.fetch(t)})}},{key:"fetch",value:function(){var e=Object(g.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.show.tmdbId=t,e.next=3,Promise.all([this.fetchDetails()]);case 3:return e.next=5,this.getPosterColor();case 5:return e.abrupt("return",this.show);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.show(this.show.tmdbId).then(function(t){e.show.state=k,e.show.backdropUrl="https://image.tmdb.org/t/p/original".concat(t.backdrop_path),e.show.firstAirDate=t.first_air_date,e.show.lastAirDate=t.last_air_date,e.show.name=t.name,e.show.overview=t.overview,e.show.posterUrl="https://image.tmdb.org/t/p/original".concat(t.poster_path)})}},{key:"getPosterColor",value:function(){var e=this;return V()(this.show.posterUrl,{scale:.1}).then(function(t){e.show.posterColor=t[0].color})}},{key:"show",get:function(){return this._show}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),Q=function(e){return e.shows},Z=function(e){return Object(J.a)(Q,function(t){return t[e]})},ee=function(e){return{type:"UPDATE_SHOW",payload:e}},te=function(){function e(t,n,r,i){Object(m.a)(this,e),this._show={tmdbId:t,name:n},this._season={id:r,seasonNumber:i},this._tmdb=new B}return Object(d.a)(e,[{key:"perform",value:function(){var e=Object(g.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchDetails(),this.fetchCredits()]);case 2:return e.next=4,this.getPosterColor();case 4:return e.abrupt("return",this.season);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.season(this.show.tmdbId,this.season.seasonNumber).then(function(t){e.season.state=k,e.season.airDate=t.air_date,e.season.name=t.name,e.season.overview=t.overview,e.season.posterUrl="https://image.tmdb.org/t/p/original".concat(t.poster_path),e.season.trailerLink="https://www.youtube.com/results?search_query=".concat(new H(e.show.name).perform(),"+").concat(new H(e.season.name).perform(),"+official+trailer&i=movies-tv")})}},{key:"fetchCredits",value:function(){var e=this;return this.tmdb.seasonCredits(this.show.tmdbId,this.season.seasonNumber).then(function(t){e.season.cast=t.cast.map(function(e){return{character:e.character,name:e.name}}),e.season.crew=t.crew.map(function(e){return{job:e.job,name:e.name}})})}},{key:"getPosterColor",value:function(){var e=this;return V()(this.season.posterUrl,{scale:.1}).then(function(t){e.season.posterColor=t[0].color})}},{key:"show",get:function(){return this._show}},{key:"season",get:function(){return this._season}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),ne=function(e){return e.seasons},re=function(e){return Object(J.a)(ne,function(t){return t[e]})},ie=function(e){return{type:"UPDATE_SEASON",payload:e}},ae=function(){function e(t,n,r,i,a,o){Object(m.a)(this,e),this._show={tmdbId:t,name:n},this._season={seasonNumber:r,name:i},this._episode={id:a,episodeNumber:o},this._tmdb=new B}return Object(d.a)(e,[{key:"perform",value:function(){var e=Object(g.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchDetails()]);case 2:return e.abrupt("return",this.episode);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.episode(this.show.tmdbId,this.season.seasonNumber,this.episode.episodeNumber).then(function(t){e.episode.state=k,e.episode.airDate=t.air_date,e.episode.name=t.name,e.episode.overview=t.overview})}},{key:"show",get:function(){return this._show}},{key:"season",get:function(){return this._season}},{key:"episode",get:function(){return this._episode}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),oe=function(e){return e.episodes},ce=function e(t){return function(n,r){var i=function(e){return Object(J.a)(oe,function(t){return t[e]})}(t)(r()),a=re(i.seasonId)(r()),o=Z(a.showId)(r());new ae(o.tmdbId,o.name,a.seasonNumber,a.name,i.id,i.episodeNumber).perform().then(function(e){n(ue(e))}).catch(function(){return n(e(t))})}},ue=function(e){return{type:"UPDATE_EPISODE",payload:e}},se=function(){return function(e,t){e(le()),new L(t().auth.token).perform().then(function(n){n.forEach(function(t){e($(t)),e(Y(t.id))});var r=n.map(function(e){return e.id});Object.keys(t().movies).forEach(function(t){r.includes(t)||e(function(e){return{type:"REMOVE_MOVIE",payload:e}}(t))})}).then(function(){return new T(t().auth.token).perform()}).then(function(n){n.forEach(function(t){e(ee(t)),e(function e(t){return function(n,r){var i=Z(t)(r());new K(i.id,i.name).perform().then(function(e){n(ee(e))}).catch(function(){return n(e(t))})}}(t.id))});var r=n.map(function(e){return e.id});Object.keys(t().shows).forEach(function(t){r.includes(t)||e(function(e){return{type:"REMOVE_SHOW",payload:e}}(t))})}).then(function(){return new q(t().auth.token,Object.keys(t().shows)).perform()}).then(function(n){n.forEach(function(t){e(ie(t)),e(function e(t){return function(n,r){var i=re(t)(r()),a=Z(i.showId)(r());new te(a.tmdbId,a.name,i.id,i.seasonNumber).perform().then(function(e){n(ie(e))}).catch(function(){return n(e(t))})}}(t.id))});var r=n.map(function(e){return e.id});Object.keys(t().seasons).forEach(function(t){r.includes(t)||e(function(e){return{type:"REMOVE_SEASON",payload:e}}(t))})}).then(function(){return new R(t().auth.token,Object.keys(t().seasons)).perform()}).then(function(n){n.forEach(function(t){e(ue(t)),e(ce(t.id))});var r=n.map(function(e){return e.id});Object.keys(t().episodes).forEach(function(t){r.includes(t)||e(function(e){return{type:"REMOVE_EPISODE",payload:e}}(t))})}).then(function(){e(pe())}).catch(function(t){e(fe(t)),401===t.statusCode&&e(he())})}},le=function(){return{type:"INDEX_BEGIN"}},pe=function(){return{type:"INDEX_SUCCESS"}},fe=function(e){return{type:"INDEX_FAILURE",payload:e}},he=function(){return function(e){e(me()),(new y).perform().then(function(t){e(de(t)),e(se())}).catch(function(t){return e(ve(t))})}},me=function(){return{type:"LOG_IN_BEGIN"}},de=function(e){return{type:"LOG_IN_SUCCESS",payload:e}},ve=function(e){return{type:"LOG_IN_FAILURE",payload:e}},be={token:null,user:null,loading:!1,error:null},ye={loading:!1,error:null},Oe=n(36),we=n(46);function ge(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function je(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function ke(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Ee(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var _e=Object(u.c)({auth:Object(l.a)({key:"auth",storage:f.a,whitelist:["token","user"],debug:!1},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN_BEGIN":return Object(h.a)({},e,{loading:!0,error:null});case"LOG_IN_SUCCESS":return Object(h.a)({},e,{token:t.payload.token,user:t.payload.user,loading:!1});case"LOG_IN_FAILURE":return Object(h.a)({},e,{loading:!1,error:t.payload});default:return e}}),indexing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INDEX_BEGIN":return Object(h.a)({},e,{loading:!0,error:null});case"INDEX_SUCCESS":return Object(h.a)({},e,{loading:!1});case"INDEX_FAILURE":return Object(h.a)({},e,{loading:!1,error:t.payload});default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_MOVIE":return e[t.payload],Object(we.a)(e,[t.payload].map(ge));case"UPDATE_MOVIE":return Object(h.a)({},e,Object(Oe.a)({},t.payload.id,Object(h.a)({},e[t.payload.id],t.payload)));default:return e}},shows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_SHOW":return e[t.payload],Object(we.a)(e,[t.payload].map(je));case"UPDATE_SHOW":return Object(h.a)({},e,Object(Oe.a)({},t.payload.id,Object(h.a)({},e[t.payload.id],t.payload)));default:return e}},seasons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_SEASON":return e[t.payload],Object(we.a)(e,[t.payload].map(ke));case"UPDATE_SEASON":return Object(h.a)({},e,Object(Oe.a)({},t.payload.id,Object(h.a)({},e[t.payload.id],t.payload)));default:return e}},episodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_EPISODE":return e[t.payload],Object(we.a)(e,[t.payload].map(Ee));case"UPDATE_EPISODE":return Object(h.a)({},e,Object(Oe.a)({},t.payload.id,Object(h.a)({},e[t.payload.id],t.payload)));default:return e}}}),xe=Object(l.a)({key:"root",storage:f.a,whitelist:["movies","shows"],debug:!1},_e),Ie=Object(u.d)(xe,Object(u.a)(s.a)),Ne=n(219),Se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function De(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ce=n(10),Pe=n(9),Ae=n(11),Ue=n(55),Le=n(49),Te=(n(491),function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Cover",style:{height:"".concat(this.props.height,"px"),width:"".concat(this.props.width,"px")}},i.a.createElement("div",{className:"Cover__progress",style:{width:"".concat(this.props.progress,"%")}}),i.a.createElement("img",{className:"Cover__image",src:this.props.url,alt:this.props.alt,style:{"--box-shadow-color":this.props.color&&this.props.color.replace("rgb","rgba").replace(")",", 0.16)")}}))}}]),t}(r.Component)),Me=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Item"},i.a.createElement(Ue.b,{to:this.props.item.path},i.a.createElement(Te,{url:this.props.item.posterUrl||"/cover.png",color:this.props.item.posterColor,alt:this.props.item.name,progress:100*(this.props.item.progress||0)/this.props.item.runtime,height:this.props.height,width:this.props.width})))}}]),t}(r.Component),qe=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"ItemList"},this.props.items.map(function(t){return i.a.createElement(Me,{item:t,height:e.props.itemHeight,width:e.props.itemWidth,key:t.id})}))}}]),t}(r.Component),Re=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ForYou"},i.a.createElement(qe,{items:Object.values(this.props.movies),itemHeight:360,itemWidth:240}))}}]),t}(r.Component),We=Object(c.b)(function(e){return{movies:e.movies}})(Re),Ve=n(221),Fe=n.n(Ve),Ge=(n(497),function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("track",{kind:"captions",label:this.props.caption.information,src:this.props.caption.url,srcLang:this.props.caption.srclang||"en",default:0===this.props.key})}}]),t}(r.Component)),Be=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("source",{src:this.props.source.url,type:this.props.source.mimeType,size:this.props.source.information})}}]),t}(r.Component),He=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){document.querySelector("#player")&&(this.player=new Fe.a(document.querySelector("#player"),{debug:!1}),this.player.on("play",function(){document.querySelector("button#continue")&&(document.querySelector("button#continue").style.display="none")}),this.player.on("timeupdate",function(e){e.detail.plyr.currentTime}))}},{key:"render",value:function(){return 0===this.props.item.files.filter(function(e){return"source"===e.type}).length?null:(console.log(this.props.item.files.filter(function(e){return"source"===e.type})[0].url),i.a.createElement("div",{className:"PlyrPlayer"},i.a.createElement("video",{src:this.props.item.files.filter(function(e){return"source"===e.type})[0].url,id:"player",crossOrigin:"true",playsInline:!0,controls:!0},this.props.item.files.filter(function(e){return"source"===e.type}).map(function(e,t){return i.a.createElement(Be,{source:e,key:t})}),this.props.item.files.filter(function(e){return"caption"===e.type}).map(function(e,t){return i.a.createElement(Ge,{caption:e,key:t})}),i.a.createElement("a",{href:this.props.item.files.filter(function(e){return"source"===e.type})[0].src,download:!0},"Download"))))}}]),t}(r.Component),Xe=Object(c.b)(function(e){return{}},{index:se})(He),Je=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Movie"},i.a.createElement(Xe,{item:this.props.movies[this.props.match.params.id]}),i.a.createElement("h1",null,this.props.movies[this.props.match.params.id].name))}}]),t}(r.Component),ze=Object(c.b)(function(e){return{movies:e.movies}})(Je),Ye=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Movies"},i.a.createElement(Le.a,{path:"".concat(this.props.match.path,"/:id"),component:ze}),i.a.createElement(Le.a,{exact:!0,path:this.props.match.path,render:function(){return i.a.createElement("h3",null,"Please select a movie.")}}))}}]),t}(r.Component),$e=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Shows"})}}]),t}(r.Component),Ke=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Find"})}}]),t}(r.Component),Qe=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Welcome"})}}]),t}(r.Component),Ze=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"NotFound"})}}]),t}(r.Component),et=function(e){function t(){return Object(m.a)(this,t),Object(Ce.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Loading"})}}]),t}(r.Component),tt=function(e){function t(e){var n;return Object(m.a)(this,t),n=Object(Ce.a)(this,Object(Pe.a)(t).call(this,e)),new y,n}return Object(Ae.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.props.loading?i.a.createElement(et,null):this.props.user?i.a.createElement("div",{className:"App"},i.a.createElement("button",{onClick:this.props.index},"Index"),i.a.createElement(Ue.a,null,i.a.createElement(Le.c,null,i.a.createElement(Le.a,{path:"/",exact:!0,component:We}),i.a.createElement(Le.a,{path:"/movies",component:Ye}),i.a.createElement(Le.a,{path:"/shows",component:$e}),i.a.createElement(Le.a,{path:"/find",component:Ke}),i.a.createElement(Le.a,{component:Ze})))):i.a.createElement("div",{className:"App"},i.a.createElement("button",{onClick:this.props.logIn},"Launch"),i.a.createElement(Ue.a,null,i.a.createElement(Le.c,null,i.a.createElement(Le.a,{path:"/",exact:!0,component:Qe}),i.a.createElement(Le.a,{component:Ze}))))}}]),t}(r.Component),nt=Object(c.b)(function(e){return{user:e.auth.user}},{logIn:he,index:se})(tt);n(498);o.a.render(i.a.createElement(c.a,{store:Ie},i.a.createElement(Ne.a,{loading:i.a.createElement(et,null),persistor:Object(l.b)(Ie)},i.a.createElement(nt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Se?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):De(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):De(t,e)})}}()}},[[222,1,2]]]);
//# sourceMappingURL=main.8e495cb7.chunk.js.map
(this.webpackJsonpplaain=this.webpackJsonpplaain||[]).push([[0],{209:function(e,t,n){e.exports=n(472)},248:function(e,t){},250:function(e,t){},282:function(e,t){},283:function(e,t){},351:function(e,t){},448:function(e,t,n){},449:function(e,t,n){},450:function(e,t,n){},451:function(e,t,n){},453:function(e,t,n){},454:function(e,t,n){},455:function(e,t,n){},456:function(e,t,n){},457:function(e,t,n){},458:function(e,t,n){},459:function(e,t,n){},460:function(e,t,n){},461:function(e,t,n){},462:function(e,t,n){},463:function(e,t,n){},464:function(e,t,n){},465:function(e,t,n){},466:function(e,t,n){},467:function(e,t,n){},468:function(e,t,n){},469:function(e,t,n){},470:function(e,t,n){},471:function(e,t,n){},472:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(85),s=n.n(i),o=n(13),c=n(48),l=n(16),u=n(34),h=n(199),p=n(88),f=n(200),m=n.n(f),d=n(15),v="never",b="monthly",y="daily",w="always",g={MICROSOFT:"microsoft"},E=Object(d.a)({},g.MICROSOFT,"OneDrive"),O="movie",k="show",j="season",_="episode",x={SOURCE:"source",CAPTION:"caption"},N=["mp4","m4v","mkv","webm"],S=["vtt"],I=n(9),C=n(2),D=n(3),L=n(205),A=function(){function e(){Object(C.a)(this,e),this._userAgentApplication=new L.a({auth:{clientId:e.config.clientID}})}return Object(D.a)(e,[{key:"perform",value:function(){return this.silentLogIn()}},{key:"silentLogIn",value:function(){var t=this;return this.userAgentApplication.acquireTokenSilent({scopes:e.config.scopes}).then((function(e){return e.accessToken})).catch((function(e){return console.log(e),t.popupLogIn()}))}},{key:"popupLogIn",value:function(){var t=this;return this.userAgentApplication.loginPopup({scopes:e.config.scopes,prompt:"select_account"}).then((function(){return t.userAgentApplication.acquireTokenSilent({scopes:e.config.scopes})})).then((function(e){return e.accessToken}))}},{key:"userAgentApplication",get:function(){return this._userAgentApplication}}]),e}();A.config={clientID:"c06abdd7-3e36-4e51-9ecf-8e304a3fe37f",scopes:["user.read","files.read.all"]};var P=A,U=function(e){return{type:"LOADING_BEGIN",payload:e}},M=n(1),T=n.n(M),W=n(206),R=function(){function e(t){Object(C.a)(this,e),this._client=W.a.init({authProvider:function(e){return e(null,t)}})}return Object(D.a)(e,[{key:"movies",value:function(){return this.client.api("/me/drive/root:/Plaain/Movies:/children").get()}},{key:"shows",value:function(){return this.client.api("/me/drive/root:/Plaain/Shows:/children").get()}},{key:"children",value:function(e){return this.client.api("/me/drive/items/".concat(e,"/children")).get()}},{key:"client",get:function(){return this._client}}]),e}(),F=function(){function e(t,n){Object(C.a)(this,e),this._oneDrive=t,this._folderId=n}return Object(D.a)(e,[{key:"perform",value:function(){var e=this;return this.oneDrive.children(this.folderId).then((function(t){return t.value.map((function(t){return e.index(t)})).filter((function(e){return null!=e}))}))}},{key:"index",value:function(t){var n=e.fileType(t.name);return null==t.file||null==n?null:{provider:g.MICROSOFT,id:t.id,type:n,name:t.name,extension:e.fileExtension(t.name),information:e.fileInformation(t.name),mimeType:t.file.mimeType,url:t["@microsoft.graph.downloadUrl"]}}},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"folderId",get:function(){return this._folderId}}],[{key:"fileType",value:function(t){return N.includes(e.fileExtension(t))?x.SOURCE:S.includes(e.fileExtension(t))?x.CAPTION:null}},{key:"fileExtension",value:function(e){return e.split(".").pop()}},{key:"fileInformation",value:function(e){return e.split(".").shift()}}]),e}(),q=function(){function e(t){Object(C.a)(this,e),this._oneDrive=new R(t)}return Object(D.a)(e,[{key:"perform",value:function(){var e=this;return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=T.a,t.t1=Promise,t.next=4,T.a.awrap(this.oneDrive.movies().then((function(t){return t.value.map((function(t){return e.index(t)}))})));case 4:return t.t2=t.sent,t.t3=function(e){return e.filter((function(e){return null!==e}))},t.t4=t.t1.all.call(t.t1,t.t2).then(t.t3),t.next=9,t.t0.awrap.call(t.t0,t.t4);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),null,this)}},{key:"index",value:function(e){var t;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=e.folder){n.next=2;break}return n.abrupt("return",null);case 2:return n.next=4,T.a.awrap(new F(this.oneDrive,e.id).perform());case 4:return t=n.sent,n.abrupt("return",{provider:g.MICROSOFT,type:O,providerId:e.id,name:e.name,files:t});case 6:case"end":return n.stop()}}),null,this)}},{key:"oneDrive",get:function(){return this._oneDrive}}]),e}(),V=function(){function e(t){Object(C.a)(this,e),this._oneDrive=new R(t)}return Object(D.a)(e,[{key:"perform",value:function(){var e=this;return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=T.a,t.t1=Promise,t.next=4,T.a.awrap(this.oneDrive.shows().then((function(t){return t.value.map((function(t){return e.index(t)}))})));case 4:return t.t2=t.sent,t.t3=function(e){return e.filter((function(e){return null!==e}))},t.t4=t.t1.all.call(t.t1,t.t2).then(t.t3),t.next=9,t.t0.awrap.call(t.t0,t.t4);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),null,this)}},{key:"index",value:function(e){return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.folder){t.next=2;break}return t.abrupt("return",null);case 2:return t.abrupt("return",{provider:g.MICROSOFT,type:k,providerId:e.id,name:e.name});case 3:case"end":return t.stop()}}))}},{key:"oneDrive",get:function(){return this._oneDrive}}]),e}(),G=n(20),B=function(){function e(t,n,a){Object(C.a)(this,e),this._oneDrive=new R(t),this._shows=n,this._seasons=a}return Object(D.a)(e,[{key:"perform",value:function(){var e,t=this;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=(e=[]).concat,n.t1=e,n.t2=G.a,n.next=5,T.a.awrap(Promise.all(this.shows.map((function(e){return t.performForShow(e,t.seasons)}))));case 5:return n.t3=n.sent,n.t4=(0,n.t2)(n.t3),n.abrupt("return",n.t0.apply.call(n.t0,n.t1,n.t4));case 8:case"end":return n.stop()}}),null,this)}},{key:"performForShow",value:function(e,t){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(this.oneDrive.children(e.providerId).then((function(n){return t.filter((function(t){return t.showId===e.id})).map((function(t){var a=n.value.find((function(n){return t.id==="".concat(e.id,"-").concat(Number.parseInt(n.name))}));return a?Object(I.a)({},t,{provider:g.MICROSOFT,providerId:a.id}):t}))})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),null,this)}},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"shows",get:function(){return this._shows}},{key:"seasons",get:function(){return this._seasons}}]),e}(),Y=function(){function e(t,n,a){Object(C.a)(this,e),this._oneDrive=new R(t),this._seasons=n,this._episodes=a}return Object(D.a)(e,[{key:"perform",value:function(){var e,t=this;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=(e=[]).concat,n.t1=e,n.t2=G.a,n.next=5,T.a.awrap(Promise.all(this.seasons.map((function(e){return t.performForSeason(e,t.episodes)}))));case 5:return n.t3=n.sent,n.t4=(0,n.t2)(n.t3),n.abrupt("return",n.t0.apply.call(n.t0,n.t1,n.t4));case 8:case"end":return n.stop()}}),null,this)}},{key:"performForSeason",value:function(e,t){var n=this;return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.providerId){a.next=6;break}return a.next=3,T.a.awrap(this.oneDrive.children(e.providerId).then((function(a){return n.handleResponse(a,e,t)})));case 3:return a.abrupt("return",a.sent);case 6:return a.abrupt("return",t.filter((function(t){return t.seasonId===e.id})));case 7:case"end":return a.stop()}}),null,this)}},{key:"handleResponse",value:function(e,t,n){var a=this;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.a.awrap(Promise.all(n.filter((function(e){return e.seasonId===t.id})).map((function(n){return a.index(n,e.value.find((function(e){return n.id==="".concat(t.id,"-").concat(Number.parseInt(e.name))})))}))));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}))}},{key:"index",value:function(e,t){var n;return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=7;break}return a.next=3,T.a.awrap(new F(this.oneDrive,t.id).perform());case 3:return n=a.sent,a.abrupt("return",Object(I.a)({},e,{provider:g.MICROSOFT,providerId:t.id,files:n}));case 7:return a.abrupt("return",e);case 8:case"end":return a.stop()}}),null,this)}},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"seasons",get:function(){return this._seasons}},{key:"episodes",get:function(){return this._episodes}}]),e}(),H=n(224),Z=function(){function e(){Object(C.a)(this,e)}return Object(D.a)(e,[{key:"findMovie",value:function(t){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(e.rateLimiting());case 2:return n.abrupt("return",H(Object(I.a)({},e.config,{uri:"".concat(e.base_uri,"/search/movie"),qs:Object(I.a)({},e.config.qs,{query:t})})).then((function(e){return e.results.length<1?null:e.results[0].id})));case 3:case"end":return n.stop()}}))}},{key:"findShow",value:function(t){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(e.rateLimiting());case 2:return n.abrupt("return",H(Object(I.a)({},e.config,{uri:"".concat(e.base_uri,"/search/tv"),qs:Object(I.a)({},e.config.qs,{query:t})})).then((function(e){return e.results.length<1?null:e.results[0].id})));case 3:case"end":return n.stop()}}))}},{key:"movie",value:function(t){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(e.rateLimiting());case 2:return n.abrupt("return",H(Object(I.a)({},e.config,{uri:"".concat(e.base_uri,"/movie/").concat(t)})));case 3:case"end":return n.stop()}}))}},{key:"movieCredits",value:function(t){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(e.rateLimiting());case 2:return n.abrupt("return",H(Object(I.a)({},e.config,{uri:"".concat(e.base_uri,"/movie/").concat(t,"/credits")})));case 3:case"end":return n.stop()}}))}},{key:"show",value:function(t){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(e.rateLimiting());case 2:return n.abrupt("return",H(Object(I.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(t)})));case 3:case"end":return n.stop()}}))}},{key:"season",value:function(t,n){return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.awrap(e.rateLimiting());case 2:return a.abrupt("return",H(Object(I.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(t,"/season/").concat(n)})));case 3:case"end":return a.stop()}}))}},{key:"seasonCredits",value:function(t,n){return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.awrap(e.rateLimiting());case 2:return a.abrupt("return",H(Object(I.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(t,"/season/").concat(n,"/credits")})));case 3:case"end":return a.stop()}}))}},{key:"episode",value:function(t,n,a){return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.a.awrap(e.rateLimiting());case 2:return r.abrupt("return",H(Object(I.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(t,"/season/").concat(n,"/episode")+"/".concat(a)})));case 3:case"end":return r.stop()}}))}}],[{key:"rateLimiting",value:function(){return T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.awrap(new Promise((function(e){return setTimeout(e,250)})));case 2:case"end":return e.stop()}}))}}]),e}();Z.config={qs:{api_key:"7a10886d19bdc8b264b9d570eaf54e68",language:"en-US"},headers:{"User-Agent":"Request-Promise"},json:!0},Z.base_uri="https://api.themoviedb.org/3";var X=Z,z=function(){function e(t){Object(C.a)(this,e),this._shows=t,this._tmdb=new X}return Object(D.a)(e,[{key:"perform",value:function(){var e,t=this;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=(e=[]).concat,n.t1=e,n.t2=G.a,n.next=5,T.a.awrap(Promise.all(this.shows.map((function(e){return t.tmdb.show(e.id).then((function(t){return t.seasons.map((function(t){return{id:"".concat(e.id,"-").concat(t.season_number),type:j,seasonNumber:t.season_number,showId:e.id,providerId:null}}))}))}))));case 5:return n.t3=n.sent,n.t4=(0,n.t2)(n.t3),n.abrupt("return",n.t0.apply.call(n.t0,n.t1,n.t4));case 8:case"end":return n.stop()}}),null,this)}},{key:"shows",get:function(){return this._shows}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),J=function(){function e(t){Object(C.a)(this,e),this._seasons=t,this._tmdb=new X}return Object(D.a)(e,[{key:"perform",value:function(){var e,t=this;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=(e=[]).concat,n.t1=e,n.t2=G.a,n.next=5,T.a.awrap(Promise.all(this.seasons.map((function(e){return t.tmdb.season(e.showId,e.seasonNumber).then((function(t){return t.episodes.map((function(t){return{id:"".concat(e.id,"-").concat(t.episode_number),type:_,episodeNumber:t.episode_number,seasonId:e.id,providerId:null}}))}))}))));case 5:return n.t3=n.sent,n.t4=(0,n.t2)(n.t3),n.abrupt("return",n.t0.apply.call(n.t0,n.t1,n.t4));case 8:case"end":return n.stop()}}),null,this)}},{key:"seasons",get:function(){return this._seasons}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),K=function(){function e(t){Object(C.a)(this,e),this._string=t}return Object(D.a)(e,[{key:"perform",value:function(){return this.string.toLowerCase().replace(/\s/g,"+")}},{key:"string",get:function(){return this._string}}]),e}(),$=function(){function e(t){Object(C.a)(this,e),this._movie=t,this._tmdb=new X}return Object(D.a)(e,[{key:"perform",value:function(){var e=this;return this.tmdb.findMovie(this.movie.name).then((function(t){return e.fetch(t)}))}},{key:"fetch",value:function(e){return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.movie.id=e,this.movie.path="/app/movie/".concat(this.movie.id),null!==this.movie.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,T.a.awrap(Promise.all([this.fetchDetails(),this.fetchCredits()]));case 6:return t.abrupt("return",this.movie);case 7:case"end":return t.stop()}}),null,this)}},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.movie(this.movie.id).then((function(t){e.movie.backdropUrl="https://image.tmdb.org/t/p/original".concat(t.backdrop_path),e.movie.overview=t.overview,e.movie.posterUrl="https://image.tmdb.org/t/p/original".concat(t.poster_path),e.movie.releaseDate=t.release_date,e.movie.runtime=t.runtime,e.movie.name=t.title,e.movie.trailerLink="https://www.youtube.com/results?search_query="+"".concat(new K(e.movie.name).perform(),"+official+trailer")}))}},{key:"fetchCredits",value:function(){var e=this;return this.tmdb.movieCredits(this.movie.id).then((function(t){e.movie.cast=t.cast.map((function(e){return{id:e.id,character:e.character,name:e.name,gender:e.gender,profileUrl:"https://image.tmdb.org/t/p/original".concat(e.profile_path)}})),e.movie.crew=t.crew.map((function(e){return{id:e.id,job:e.job,name:e.name,gender:e.gender,profileUrl:"https://image.tmdb.org/t/p/original".concat(e.profile_path)}}))}))}},{key:"movie",get:function(){return this._movie}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),Q=function e(t){return function(n){return new $(t).perform().then((function(e){n(te(e))})).catch((function(){return n(e(t))}))}},ee=function(e){return{type:"REMOVE_MOVIE",payload:e}},te=function(e){return{type:"UPDATE_MOVIE",payload:e}},ne=function(){function e(t){Object(C.a)(this,e),this._show=t,this._tmdb=new X}return Object(D.a)(e,[{key:"perform",value:function(){var e=this;return this.tmdb.findShow(this.show.name).then((function(t){return e.fetch(t)}))}},{key:"fetch",value:function(e){return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.show.id=e,this.show.path="/app/show/".concat(this.show.id),null!==this.show.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,T.a.awrap(Promise.all([this.fetchDetails()]));case 6:return t.abrupt("return",this.show);case 7:case"end":return t.stop()}}),null,this)}},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.show(this.show.id).then((function(t){e.show.backdropUrl="https://image.tmdb.org/t/p/original".concat(t.backdrop_path),e.show.firstAirDate=t.first_air_date,e.show.lastAirDate=t.last_air_date,e.show.name=t.name,e.show.overview=t.overview,e.show.posterUrl="https://image.tmdb.org/t/p/original".concat(t.poster_path)}))}},{key:"show",get:function(){return this._show}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),ae=function e(t){return function(n){return new ne(t).perform().then((function(e){n(ie(e))})).catch((function(){return n(e(t))}))}},re=function(e){return{type:"REMOVE_SHOW",payload:e}},ie=function(e){return{type:"UPDATE_SHOW",payload:e}},se=function(){function e(t,n,a){Object(C.a)(this,e),this._show={id:t,name:n},this._season=a,this._tmdb=new X}return Object(D.a)(e,[{key:"perform",value:function(){return T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.season.id="".concat(this.show.id,"-").concat(this.season.seasonNumber),this.season.path="/app/season/".concat(this.season.id),e.next=4,T.a.awrap(Promise.all([this.fetchDetails(),this.fetchCredits()]));case 4:return e.abrupt("return",this.season);case 5:case"end":return e.stop()}}),null,this)}},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.season(this.show.id,this.season.seasonNumber).then((function(t){e.season.airDate=t.air_date,e.season.name=t.name,e.season.overview=t.overview,e.season.posterUrl="https://image.tmdb.org/t/p/original".concat(t.poster_path),e.season.trailerLink="https://www.youtube.com/results?search_query="+"".concat(new K(e.show.name).perform(),"+")+"".concat(new K(e.season.name).perform(),"+")+"official+trailer&i=movies-tv"}))}},{key:"fetchCredits",value:function(){var e=this;return this.tmdb.seasonCredits(this.show.id,this.season.seasonNumber).then((function(t){e.season.cast=t.cast.map((function(e){return{id:e.id,character:e.character,name:e.name,gender:e.gender,profileUrl:"https://image.tmdb.org/t/p/original".concat(e.profile_path)}})),e.season.crew=t.crew.map((function(e){return{id:e.id,job:e.job,name:e.name,gender:e.gender,profileUrl:"https://image.tmdb.org/t/p/original".concat(e.profile_path)}}))}))}},{key:"show",get:function(){return this._show}},{key:"season",get:function(){return this._season}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),oe=n(14),ce=function(e){return e.shows},le=function(e){return Object(oe.a)(ce,(function(t){return t[e]}))},ue=function e(t){return function(n,a){var r=le(t.showId)(a());return new se(r.id,r.name,t).perform().then((function(e){n(pe(e))})).catch((function(){return n(e(t))}))}},he=function(e){return{type:"REMOVE_SEASON",payload:e}},pe=function(e){return{type:"UPDATE_SEASON",payload:e}},fe=function(){function e(t,n,a,r,i){Object(C.a)(this,e),this._show={id:t,name:n},this._season={seasonNumber:a,name:r},this._episode=i,this._tmdb=new X}return Object(D.a)(e,[{key:"perform",value:function(){return T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.episode.id="".concat(this.show.id,"-").concat(this.season.seasonNumber,"-")+"".concat(this.episode.episodeNumber),e.next=3,T.a.awrap(Promise.all([this.fetchDetails()]));case 3:return e.abrupt("return",this.episode);case 4:case"end":return e.stop()}}),null,this)}},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.episode(this.show.id,this.season.seasonNumber,this.episode.episodeNumber).then((function(t){e.episode.airDate=t.air_date,e.episode.name=t.name,e.episode.overview=t.overview}))}},{key:"show",get:function(){return this._show}},{key:"season",get:function(){return this._season}},{key:"episode",get:function(){return this._episode}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),me=function(e){return e.seasons},de=function(e){return Object(oe.a)(me,(function(t){return t[e]}))},ve=function(e){return Object(oe.a)(me,(function(t){return Object.values(t).map((function(e){return e.cast})).flat().filter((function(t){return t.id===e}))}))},be=function(e){return Object(oe.a)(me,(function(t){return Object.values(t).map((function(e){return e.crew})).flat().filter((function(t){return t.id===e}))}))},ye=function e(t){return function(n,a){var r=de(t.seasonId)(a()),i=le(r.showId)(a());return new fe(i.id,i.name,r.seasonNumber,r.name,t).perform().then((function(e){n(ge(e))})).catch((function(){return n(e(t))}))}},we=function(e){return{type:"REMOVE_EPISODE",payload:e}},ge=function(e){return{type:"UPDATE_EPISODE",payload:e}},Ee=function(){return function(e,t){e(U("Indexing...")),e(je()),new q(t().auth[g.MICROSOFT].token).perform().then((function(n){return Oe(e,n.map((function(e){return e.id})),Object.keys(t().movies),ee),ke(e,n,Q)})).then((function(){return new V(t().auth[g.MICROSOFT].token).perform()})).then((function(n){return Oe(e,n.map((function(e){return e.id})),Object.keys(t().shows),re),ke(e,n,ae)})).then((function(){return new z(Object.values(t().shows)).perform()})).then((function(e){return new B(t().auth[g.MICROSOFT].token,Object.values(t().shows),e).perform()})).then((function(n){return Oe(e,n.map((function(e){return e.id})),Object.keys(t().seasons),he),ke(e,n,ue)})).then((function(){return new J(Object.values(t().seasons)).perform()})).then((function(e){return new Y(t().auth[g.MICROSOFT].token,Object.values(t().seasons),e).perform()})).then((function(n){return Oe(e,n.map((function(e){return e.id})),Object.keys(t().episodes),we),ke(e,n,ye)})).then((function(){e(function(e){return{type:"UPDATE_VERSION",payload:e}}("0.0.1")),e(_e()),e({type:"LOADING_STOP"})})).catch((function(t){console.log(t),e(xe(t)),e({type:"LOADING_STOP"}),401===t.statusCode&&e(Ne(g.MICROSOFT))}))}};function Oe(e,t,n,a){n.forEach((function(n){t.includes(n)||e(a(n))}))}function ke(e,t,n){return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.awrap(Promise.all(t.map((function(t){return e(n(t))}))));case 2:return a.abrupt("return",t);case 3:case"end":return a.stop()}}))}var je=function(){return{type:"INDEX_BEGIN"}},_e=function(){return{type:"INDEX_SUCCESS"}},xe=function(e){return{type:"INDEX_FAILURE",payload:e}},Ne=function(e){return function(t){return t(Ce(e,"expired"))}},Se=function(e){return{type:"LOG_IN_BEGIN",payload:e}},Ie=function(e,t){return{type:"LOG_IN_SUCCESS",payload:{provider:e,token:t}}},Ce=function(e,t){return{type:"LOG_IN_FAILURE",payload:{provider:e,error:t}}},De=Object.values(g).reduce((function(e,t){return Object(I.a)({},e,Object(d.a)({},t,{token:null,error:null}))}),{}),Le={automaticIndexing:v},Ae={lastIndexed:0,error:null},Pe=n(46),Ue=n(47),Me=Object(u.c)({version:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.0.1",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_VERSION":return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN_BEGIN":return Object(I.a)({},e,Object(d.a)({},t.payload,Object(I.a)({},e[t.payload],{error:null})));case"LOG_IN_SUCCESS":return Object(I.a)({},e,Object(d.a)({},t.payload.provider,Object(I.a)({},e[t.payload.provider],{token:t.payload.token,error:null})));case"LOG_IN_FAILURE":return Object(I.a)({},e,Object(d.a)({},t.payload.provider,Object(I.a)({},e[t.payload.provider],{error:t.payload.error})));default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS_UPDATE":return Object(I.a)({},e,{},t.payload);default:return e}},indexing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INDEX_BEGIN":return Object(I.a)({},e,{error:null});case"INDEX_SUCCESS":return Object(I.a)({},e,{lastIndexed:(new Date).getTime()});case"INDEX_FAILURE":return Object(I.a)({},e,{error:t.payload});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_BEGIN":return t.payload;case"LOADING_STOP":return!1;default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_MOVIE":var n=t.payload,a=(e[n],Object(Pe.a)(e,[n].map(Ue.a)));return a;case"UPDATE_MOVIE":return Object(I.a)({},e,Object(d.a)({},t.payload.id,Object(I.a)({},e[t.payload.id],{},t.payload)));default:return e}},shows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_SHOW":var n=t.payload,a=(e[n],Object(Pe.a)(e,[n].map(Ue.a)));return a;case"UPDATE_SHOW":return Object(I.a)({},e,Object(d.a)({},t.payload.id,Object(I.a)({},e[t.payload.id],{},t.payload)));default:return e}},seasons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_SEASON":var n=t.payload,a=(e[n],Object(Pe.a)(e,[n].map(Ue.a)));return a;case"UPDATE_SEASON":return Object(I.a)({},e,Object(d.a)({},t.payload.id,Object(I.a)({},e[t.payload.id],{},t.payload)));default:return e}},episodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_EPISODE":var n=t.payload,a=(e[n],Object(Pe.a)(e,[n].map(Ue.a)));return a;case"UPDATE_EPISODE":return Object(I.a)({},e,Object(d.a)({},t.payload.id,Object(I.a)({},e[t.payload.id],{},t.payload)));default:return e}}}),Te=Object(p.a)({key:"root",storage:m.a,whitelist:["version","auth","settings","indexing","movies","shows","seasons","episodes"],debug:!1},Me),We=Object(u.d)(Te,Object(u.a)(h.a)),Re=n(202),Fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function qe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),window.newVersionAvailable=!0,t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ve=n(6),Ge=n(5),Be=n(7),Ye=(n(448),function(){function e(t,n,a){Object(C.a)(this,e),this._setting=t,this._lastIndexed=n,this._indexAction=a}return Object(D.a)(e,[{key:"perform",value:function(){return this.setting!==v&&((this.setting===w||(new Date).getFullYear()!==new Date(this.lastIndexed).getFullYear()||(new Date).getMonth()!==new Date(this.lastIndexed).getMonth()||this.setting!==b&&(new Date).getDate()!==new Date(this.lastIndexed).getDate())&&(this.indexAction(),!0))}},{key:"setting",get:function(){return this._setting}},{key:"lastIndexed",get:function(){return this._lastIndexed}},{key:"indexAction",get:function(){return this._indexAction}}]),e}()),He=function(){function e(t,n){Object(C.a)(this,e),this._versionUsedForLastIndex=t,this._indexAction=n}return Object(D.a)(e,[{key:"perform",value:function(){return"0.0.1"!==this.versionUsedForLastIndex&&(this.indexAction(),!0)}},{key:"versionUsedForLastIndex",get:function(){return this._versionUsedForLastIndex}},{key:"indexAction",get:function(){return this._indexAction}}]),e}(),Ze=(n(449),n(89)),Xe=(n(196),n(450),n(451),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("img",{className:"Cover",src:this.props.url,alt:this.props.alt,width:this.props.width})}}]),t}(a.Component)),ze=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){new Ze.a(document.querySelector(".HorizontalSlide#".concat(this.props.id," .swiper-container")),{spaceBetween:15,slidesPerView:"auto",slidesOffsetBefore:20,slidesOffsetAfter:20,grabCursor:!0})}},{key:"render",value:function(){return r.a.createElement("div",{className:"HorizontalSlide",id:this.props.id},r.a.createElement("div",{className:"swiper-container"},r.a.createElement("div",{className:"swiper-wrapper"},this.props.items.length?this.props.items.map((function(e){return r.a.createElement("div",{className:"swiper-slide",key:e.id},r.a.createElement(o.b,{to:e.path},r.a.createElement(Xe,{url:e.posterUrl||"/cover.png",alt:e.name,width:"100%"})))})):r.a.createElement("div",{className:"swiper-slide"},r.a.createElement("h3",null,"Nothing found.")))))}}]),t}(a.Component),Je=function(e){return e.movies},Ke=function(e){return Object(oe.a)(Je,(function(t){return t[e]}))},$e=function(e){return Object(oe.a)(Je,(function(t){return Object.values(t).map((function(e){return e.cast})).flat().filter((function(t){return t.id===e}))}))},Qe=function(e){return Object(oe.a)(Je,(function(t){return Object.values(t).map((function(e){return e.crew})).flat().filter((function(t){return t.id===e}))}))},et=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:first-child").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:first-child").classList.remove("active")}},{key:"render",value:function(){var e=this,t=new Date;t.setMonth(t.getMonth()-1);var n,a=[].concat(Object(G.a)(Object(oe.a)(Je,(function(e){return Object.values(e).filter((function(e){return void 0!==e.progress&&0!==e.progress&&e.progress/60<.95*e.runtime})).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}))}))({movies:this.props.movies})),Object(G.a)(Object(oe.a)(me,(function(e){return Object.values(e).filter((function(e){return void 0!==e.progress&&0!==e.progress})).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}))}))({seasons:this.props.seasons}))).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1})),i=[].concat(Object(G.a)((n=t,Object(oe.a)(Je,(function(e){return Object.values(e).filter((function(e){return e.lastWatched>=n.getTime()&&(void 0===e.progress||0===e.progress||e.progress/60>=.95*e.runtime)})).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}))})))({movies:this.props.movies})),Object(G.a)(function(e){return Object(oe.a)(me,(function(t){return Object.values(t).filter((function(t){return t.lastWatched>=e.getTime()&&(void 0===t.progress||0===t.progress)})).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}))}))}(t)({seasons:this.props.seasons}))).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}));return a.length>0||i.length>0?r.a.createElement("div",{className:"ForYou"},a.length>0&&r.a.createElement("section",null,r.a.createElement("h2",null,"Continue watching"),r.a.createElement(ze,{items:a,id:"inProgress"})),i.length>0&&r.a.createElement("section",null,r.a.createElement("h2",null,"Recently watched"),r.a.createElement(ze,{items:i,id:"recentlyWatched"}))):0===Object.values(g).filter((function(t){return null!==e.props.auth[t].token})).length?r.a.createElement("div",{className:"ForYou"},r.a.createElement("h2",null,"Get started"),r.a.createElement("p",null,"To watch your movies and TV shows, you first have to sign in with the cloud service that hosts your media."),r.a.createElement(o.b,{to:"/app/settings",className:"button"},"Authenticate"),r.a.createElement("p",{className:"small"},"Note that Plaain may ",r.a.createElement("span",{className:"bold"},"not")," be used to stream pirated content or publicly share your private media library. You may only connect to your private cloud storage.")):0===Object.entries(this.props.movies).length&&0===Object.entries(this.props.shows).length?r.a.createElement("div",{className:"ForYou"},r.a.createElement("h2",null,"Get started"),r.a.createElement("p",null,"You signed into a cloud service, but we didn't find any movies or TV shows."),r.a.createElement("p",null,"It's likely that you just have to move some of your files around and create some folders to make it work."),r.a.createElement("p",null,"Reference the getting started guide to learn how to organize your files so that Plaain finds them. After you're done, just re-index."),r.a.createElement("div",{className:"ForYou__buttons"},r.a.createElement("a",{className:"button primary",href:"https://github.com/jonhue/plaain#getting-started",target:"_blank",rel:"noopener noreferrer"},"Getting started"),r.a.createElement("button",{onClick:this.props.index},"Index"))):r.a.createElement("div",{className:"ForYou"},r.a.createElement("h2",null,"Get started"),r.a.createElement("p",null,"Here, you'll be able to find your recently watched movie or the show you didn't finish yet."),r.a.createElement("div",{className:"ForYou__buttons"},Object.entries(this.props.movies).length>0&&r.a.createElement(o.b,{to:"/app/movies",className:"button"},"Discover your movies"),Object.entries(this.props.shows).length>0&&r.a.createElement(o.b,{to:"/app/shows",className:"button"},"Discover your shows")))}}]),t}(a.Component),tt=Object(l.b)((function(e){return{movies:e.movies,shows:e.shows,seasons:e.seasons,auth:e.auth}}),{index:Ee})(et),nt=(n(453),n(454),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ItemGrid",id:this.props.id},this.props.items.length?this.props.items.map((function(e){return r.a.createElement("div",{className:"ItemGrid__item",key:e.id},r.a.createElement(o.b,{to:e.path},r.a.createElement(Xe,{url:e.posterUrl||"/cover.png",alt:e.name,width:"100%"})))})):r.a.createElement("div",{className:"ItemGrid__item"},r.a.createElement("h3",null,"Nothing found.")))}}]),t}(a.Component)),at=(n(455),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){new Ze.a(document.querySelector(".VerticalSlide#".concat(this.props.id," .swiper-container")),{direction:"vertical",slidesPerView:"auto",grabCursor:!0,effect:"coverflow",coverflowEffect:{rotate:0,stretch:425,depth:150,modifier:1,slideShadows:!1},history:{replaceState:!0,key:this.props.path}})}},{key:"render",value:function(){return r.a.createElement("div",{className:"VerticalSlide",id:this.props.id},r.a.createElement("div",{className:"swiper-container"},r.a.createElement("div",{className:"swiper-wrapper"},this.props.items.length?this.props.items.map((function(e){return r.a.createElement("div",{className:"swiper-slide","data-history":e.id,key:e.id},r.a.createElement(o.b,{to:e.path},r.a.createElement(Xe,{url:e.posterUrl||"/cover.png",alt:e.name,width:"100%"})))})):r.a.createElement("div",{className:"swiper-slide"},r.a.createElement("h3",null,"Nothing found.")))))}}]),t}(a.Component)),rt=function(e){return r.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"zoom"),r.a.createElement("g",{fill:"#ffffff"},r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"22",x2:"15.656",y1:"22",y2:"15.656"}),r.a.createElement("circle",{cx:"10",cy:"10",fill:"none",r:"8",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2"})))},it=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(2)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(2)").classList.remove("active")}},{key:"render",value:function(){return r.a.createElement("div",{className:"Movies"},Object.entries(this.props.movies).length>0&&r.a.createElement("div",{className:"Movies__wrapper"},r.a.createElement("div",{className:"Movies__find"},r.a.createElement(o.b,{to:"/app/find"},r.a.createElement(rt,{width:24,height:24}))),window.innerWidth<600?r.a.createElement(at,{items:Object.values(this.props.movies).sort((function(e,t){return e.name<t.name?-1:1})),id:"movies",path:"movies"}):r.a.createElement(nt,{items:Object.values(this.props.movies).sort((function(e,t){return e.name<t.name?-1:1})),id:"movies"})))}}]),t}(a.Component),st=Object(l.b)((function(e){return{movies:e.movies}}))(it),ot=(n(456),n(457),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h2",null,"You want to get lost?"),r.a.createElement("p",null,"This path went astray... If you do want to get lost, we recommend ",r.a.createElement("a",{href:"https://www.imdb.com/title/tt6969502/",target:"_blank",rel:"noopener noreferrer"},"Get Lost! ny Mirjam de With"),"."),r.a.createElement("p",null,"If all you're looking for is to get back on track: you can ",r.a.createElement(o.b,{to:"/app"},"find home this way"),"."))}}]),t}(a.Component)),ct=(n(458),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("picture",{className:"Backdrop"},r.a.createElement("img",{src:this.props.url,alt:"backdrop"}))}}]),t}(a.Component)),lt=(n(459),function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(Ve.a)(this,Object(Ge.a)(t).call(this,e))).state={wrapped:!0},n}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"toggle",value:function(){this.setState({wrapped:!this.state.wrapped})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"PersonList"},this.props.people.slice(0,this.state.wrapped?10:this.props.people.length).map((function(t,n){return r.a.createElement("p",{key:n},r.a.createElement(o.b,{to:"/app/person/".concat(t.id)},t.name)," \xb7 ",r.a.createElement("span",null,t[e.props.attribute]))})),r.a.createElement("span",{onClick:this.toggle.bind(this)},this.state.wrapped?"Show more":"Show less"))}}]),t}(a.Component)),ut=n(204),ht=n.n(ut),pt=(n(460),n(207)),ft=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("track",{kind:"captions",label:this.props.caption.information,src:this.props.caption.url,srcLang:pt.a.getCode(this.props.caption.information)||"en",default:this.props.default})}}]),t}(a.Component),mt=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("source",{src:this.props.source.url,type:this.props.source.mimeType,size:this.props.source.information})}}]),t}(a.Component),dt=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.player=new ht.a(document.querySelector("#player"),{debug:!1}),this.player.on("error",(function(t){console.log(t),e.props.logInExpired(e.props.item.provider)})),this.player.on("timeupdate",(function(t){0!==t.detail.plyr.currentTime&&e.props.updateItemAction({id:e.props.item.id,lastWatched:(new Date).getTime(),progress:t.detail.plyr.currentTime})})),this.player.on("exitfullscreen",(function(){var t=document.querySelector(".PlyrPlayer");t&&!t.dataset.preventExit&&(e.player.stop(),t.style.display="none",e.props.exitedAction&&e.props.exitedAction())})),this.player.on("ended",(function(){e.player.fullscreen.exit(),document.querySelector(".PlyrPlayer").style.display="none",e.props.endedAction&&e.props.endedAction()}))}},{key:"render",value:function(){return 0===this.props.item.files.filter((function(e){return e.type===x.SOURCE})).length?null:r.a.createElement("div",{className:"PlyrPlayer"},r.a.createElement("video",{src:this.props.item.files.filter((function(e){return e.type===x.SOURCE}))[0].url,id:"player",crossOrigin:"true",playsInline:!0,controls:!0},this.props.item.files.filter((function(e){return e.type===x.SOURCE})).map((function(e,t){return r.a.createElement(mt,{source:e,key:t})})),this.props.item.files.filter((function(e){return e.type===x.CAPTION})).map((function(e,t){return r.a.createElement(ft,{caption:e,default:0===t,key:t})})),r.a.createElement("a",{href:this.props.item.files.filter((function(e){return e.type===x.SOURCE}))[0].src,download:!0},"Download")))}}]),t}(a.Component),vt=Object(l.b)(null,{logInExpired:Ne})(dt),bt=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(Ve.a)(this,Object(Ge.a)(t).call(this,e))).state={movie:Ke(n.props.match.params.id)({movies:n.props.movies})},n}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(2)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(2)").classList.remove("active")}},{key:"continue",value:function(){this.watch(this.state.movie.progress)}},{key:"watch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.querySelector(".PlyrPlayer"),n=t.querySelector("#player").plyr;t.dataset.preventExit=!0,setTimeout((function(){t.style.display="block",n.fullscreen.enter(),n.play(),n.currentTime=e,setTimeout((function(){delete t.dataset.preventExit}),100)}),100)}},{key:"finishedMovie",value:function(){this.props.updateMovie({id:this.state.movie.id,progress:0})}},{key:"render",value:function(){var e=this;return this.state.movie?r.a.createElement("div",{className:"Movie"},this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).length>0&&r.a.createElement(vt,{item:this.state.movie,updateItemAction:this.props.updateMovie,endedAction:this.finishedMovie.bind(this)}),r.a.createElement(ct,{url:this.state.movie.backdropUrl}),r.a.createElement("div",{className:"Movie__details"},r.a.createElement(Xe,{url:this.state.movie.posterUrl,alt:"poster",width:"50%"}),r.a.createElement("h1",null,this.state.movie.name),r.a.createElement("div",{className:"Movie__information"},r.a.createElement("p",{className:"small"},new Date(this.state.movie.releaseDate).getFullYear()),r.a.createElement("p",{className:"small"},0!==Math.floor(this.state.movie.runtime/60)&&"".concat(Math.floor(this.state.movie.runtime/60),"h")," ",this.state.movie.runtime%60!==0&&"".concat(this.state.movie.runtime%60,"m"))),r.a.createElement("div",{className:"Movie__actions"},this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).length>0&&void 0!==this.state.movie.progress&&0!==this.state.movie.progress&&this.state.movie.progress/60<this.state.movie.runtime&&r.a.createElement("button",{className:"primary",id:"continue",onClick:this.continue.bind(this)},"Continue"),this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).length>0&&r.a.createElement("button",{className:void 0===this.state.movie.progress||0===this.state.movie.progress||this.state.movie.progress/60>=this.state.movie.runtime?"primary":"",id:"watch",onClick:function(){return e.watch()}},"Watch"),r.a.createElement("a",{className:"button",id:"trailer",href:this.state.movie.trailerLink,target:"_blank",rel:"noopener noreferrer"},"Play trailer")),r.a.createElement("p",{className:"Movie__overview"},this.state.movie.overview),r.a.createElement("div",{className:"Movie__people"},r.a.createElement("div",{className:"Movie__people__cast"},r.a.createElement("h4",null,"Starring"),r.a.createElement(lt,{people:this.state.movie.cast,attribute:"character"})),r.a.createElement("div",{className:"Movie__people__crew"},r.a.createElement("h4",null,"Crew"),r.a.createElement(lt,{people:this.state.movie.crew,attribute:"job"})))),r.a.createElement("div",{className:"Movie__sources"},r.a.createElement("div",null,r.a.createElement("h4",null,"Sources"),r.a.createElement("p",{className:"small"},"Hosted on ",E[this.state.movie.provider]),r.a.createElement("div",null,r.a.createElement("div",{className:"Movie__sources__versions"},r.a.createElement("h5",null,"Versions"),this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).map((function(e,t){return r.a.createElement("p",{className:"small",key:t},e.information)})),0===this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).length&&r.a.createElement("p",{className:"small"},"-")),r.a.createElement("div",{className:"Movie__sources__captions"},r.a.createElement("h5",null,"Subtitles"),this.state.movie.files.filter((function(e){return e.type===x.CAPTION})).map((function(e,t){return r.a.createElement("p",{className:"small",key:t},e.information)})),0===this.state.movie.files.filter((function(e){return e.type===x.CAPTION})).length&&r.a.createElement("p",{className:"small"},"-")))))):r.a.createElement(ot,null)}}]),t}(a.Component),yt=Object(l.b)((function(e){return{movies:e.movies}}),{updateMovie:te})(bt),wt=(n(461),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.remove("active")}},{key:"render",value:function(){return r.a.createElement("div",{className:"Shows"},Object.entries(this.props.shows).length>0&&r.a.createElement("div",{className:"Shows__wrapper"},r.a.createElement("div",{className:"Shows__find"},r.a.createElement(o.b,{to:"/app/find"},r.a.createElement(rt,{width:24,height:24}))),window.innerWidth<600?r.a.createElement(at,{items:Object.values(this.props.shows).sort((function(e,t){return e.name<t.name?-1:1})),id:"shows",path:"shows"}):r.a.createElement(nt,{items:Object.values(this.props.shows).sort((function(e,t){return e.name<t.name?-1:1})),id:"shows"})))}}]),t}(a.Component)),gt=Object(l.b)((function(e){return{shows:e.shows}}))(wt),Et=(n(462),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.remove("active")}},{key:"render",value:function(){var e,t=le(this.props.match.params.id)({shows:this.props.shows}),n=(e=this.props.match.params.id,Object(oe.a)(me,(function(t){return Object.values(t).filter((function(t){return t.showId.toString()===e}))})))({seasons:this.props.seasons});return t?r.a.createElement("div",{className:"Show"},r.a.createElement(ct,{url:t.backdropUrl}),r.a.createElement("div",{className:"Show__details"},r.a.createElement(Xe,{url:t.posterUrl,alt:"poster",width:"50%"}),r.a.createElement("h1",null,t.name),r.a.createElement("div",{className:"Show__information"},r.a.createElement("p",{className:"small"},new Date(t.firstAirDate).getFullYear()," - ",new Date(t.lastAirDate).getFullYear())),r.a.createElement("p",{className:"Show__overview"},t.overview)),n.length>0&&r.a.createElement("div",{className:"Show__seasons"},r.a.createElement("h2",null,"Seasons"),r.a.createElement(ze,{items:n.sort((function(e,t){return e.seasonNumber<t.seasonNumber?-1:1})),id:"seasons"}))):r.a.createElement(ot,null)}}]),t}(a.Component)),Ot=Object(l.b)((function(e){return{shows:e.shows,seasons:e.seasons}}))(Et),kt=(n(463),function(e){return e.episodes}),jt=function(e){return Object(oe.a)(kt,(function(t){return Object.values(t).filter((function(t){return t.seasonId===e}))}))},_t=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(Ve.a)(this,Object(Ge.a)(t).call(this,e))).state={season:de(n.props.match.params.id)({seasons:n.props.seasons}),episodes:jt(n.props.match.params.id)({episodes:n.props.episodes}),watchableEpisodes:jt(n.props.match.params.id)({episodes:n.props.episodes}).filter((function(e){return void 0!==e.provider&&0!==e.files.filter((function(e){return e.type===x.SOURCE})).length})),episodesWrapped:!0},n.state.currentEpisodeNumber=n.state.watchableEpisodes.length>0&&n.state.watchableEpisodes[0].episodeNumber,n}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.remove("active")}},{key:"toggleEpisodes",value:function(){this.setState({episodesWrapped:!this.state.episodesWrapped})}},{key:"continue",value:function(){this.watch(this.state.season.progress||0,this.state.episodes[this.state.season.progress-1].progress||0)}},{key:"watch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.setState({currentEpisodeNumber:e}),this.props.updateSeason({id:this.state.season.id,lastWatched:(new Date).getTime(),progress:e});var n=document.querySelector(".PlyrPlayer"),a=n.querySelector("#player").plyr;n.dataset.preventExit=!0,setTimeout((function(){n.style.display="block",a.fullscreen.enter(),a.play(),a.currentTime=t,setTimeout((function(){delete n.dataset.preventExit}),100)}),100)}},{key:"stoppedEpisode",value:function(){}},{key:"finishedEpisode",value:function(){this.props.updateEpisode({id:this.state.episodes[this.state.currentEpisodeNumber-1].id,progress:0});var e=0;this.state.episodes[this.state.currentEpisodeNumber].files.filter((function(e){return e.type===x.SOURCE})).length>0&&(e=this.state.currentEpisodeNumber+1),this.props.updateSeason({id:this.state.season.id,progress:e})}},{key:"render",value:function(){var e=this;return this.state.season?r.a.createElement("div",{className:"Season"},this.state.watchableEpisodes.length>0&&r.a.createElement(vt,{item:this.state.episodes[this.state.currentEpisodeNumber-1],updateItemAction:this.props.updateEpisode,exitedAction:this.stoppedEpisode.bind(this),endedAction:this.finishedEpisode.bind(this)}),r.a.createElement(ct,{url:le(this.state.season.showId)({shows:this.props.shows}).backdropUrl}),r.a.createElement("div",{className:"Season__details"},r.a.createElement(Xe,{url:this.state.season.posterUrl,alt:"poster",width:"50%"}),r.a.createElement("h1",null,"Season ",this.state.season.seasonNumber),r.a.createElement("div",{className:"Season__information"},r.a.createElement("p",{className:"small"},le(this.state.season.showId)({shows:this.props.shows}).name),r.a.createElement("p",{className:"small"},new Date(this.state.season.airDate).getFullYear())),r.a.createElement("div",{className:"Season__actions"},this.state.watchableEpisodes.length>0&&void 0!==this.state.movie.progress&&0!==this.state.season.progress&&r.a.createElement("button",{className:"primary",id:"continue",onClick:this.continue.bind(this)},"Continue episode ",this.state.season.progress),this.state.watchableEpisodes.length>0&&1!==this.state.season.progress&&r.a.createElement("button",{className:void 0===this.state.movie.progress||0===this.state.season.progress?"primary":"",id:"watch",onClick:function(){return e.watch(e.state.watchableEpisodes[0].episodeNumber)}},"Watch episode ",this.state.watchableEpisodes[0].episodeNumber),r.a.createElement("a",{className:"button",id:"trailer",href:this.state.season.trailerLink,target:"_blank",rel:"noopener noreferrer"},"Play trailer")),r.a.createElement("div",{className:"Season__episodes"},r.a.createElement("div",null,this.state.episodes.sort((function(e,t){return e.episodeNumber<t.episodeNumber?-1:1})).slice(0,this.state.episodesWrapped?0:this.state.episodes.length).map((function(t,n){return r.a.createElement("div",{disabled:void 0===e.state.episodes[t.episodeNumber-1].provider||0===e.state.episodes[t.episodeNumber-1].files.filter((function(e){return e.type===x.SOURCE})).length,className:"Season__episode",onClick:function(){return e.watch(t.episodeNumber)},key:n},r.a.createElement("div",{className:"Season__episode__number"},t.episodeNumber),r.a.createElement("div",{className:"Season__episode__details"},r.a.createElement("h2",null,t.name),r.a.createElement("p",{className:"small"},"Aired ",new Date(t.airDate).toDateString()),r.a.createElement("p",null,t.overview)))}))),this.state.episodes.length>0&&r.a.createElement("span",{onClick:this.toggleEpisodes.bind(this)},this.state.episodesWrapped?"Show all episodes":"Hide episodes")),r.a.createElement("p",{className:"Season__overview"},this.state.season.overview),r.a.createElement("div",{className:"Season__people"},r.a.createElement("div",{className:"Season__people__cast"},r.a.createElement("h4",null,"Starring"),r.a.createElement(lt,{people:this.state.season.cast,attribute:"character"})),r.a.createElement("div",{className:"Season__people__crew"},r.a.createElement("h4",null,"Crew"),r.a.createElement(lt,{people:this.state.season.crew,attribute:"job"}))))):r.a.createElement(ot,null)}}]),t}(a.Component),xt=Object(l.b)((function(e){return{shows:e.shows,seasons:e.seasons,episodes:e.episodes}}),{updateSeason:pe,updateEpisode:ge})(_t),Nt=(n(464),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=Number.parseInt(this.props.match.params.id),t=function(e){return Object(oe.a)($e(e),Qe(e),ve(e),be(e),(function(e,t,n,a){return[].concat(Object(G.a)(e),Object(G.a)(t),Object(G.a)(n),Object(G.a)(a))[0]}))}(e)({movies:this.props.movies,seasons:this.props.seasons}),n=function(e){return Object(oe.a)(Je,(function(t){return Object.values(t).filter((function(t){return t.cast.find((function(t){return t.id===e}))||t.crew.find((function(t){return t.id===e}))}))}))}(e)({movies:this.props.movies}),a=function(e){return Object(oe.a)(me,(function(t){return Object.values(t).filter((function(t){return t.cast.find((function(t){return t.id===e}))||t.crew.find((function(t){return t.id===e}))}))}))}(e)({seasons:this.props.seasons}),i=function(e,t){return Object(oe.a)($e(e),Qe(e),ve(e),be(e),(function(e,n,a,r){return Object(G.a)(new Set([e.length>0||a.length>0?1===t?"Actress":"Actor":null].concat(Object(G.a)(n.map((function(e){return e.job}))),Object(G.a)(r.map((function(e){return e.job})))))).filter((function(e){return null!==e}))}))}(e,t.gender)({movies:this.props.movies,seasons:this.props.seasons});return t?r.a.createElement("div",{className:"Person"},r.a.createElement(ct,{url:(n[0]||this.props.shows[a[0].showId]).backdropUrl}),r.a.createElement("div",{className:"Person__details"},r.a.createElement(Xe,{url:t.profileUrl,alt:"profile",width:"50%"}),r.a.createElement("h1",null,t.name),r.a.createElement("h5",null,"Known as"),r.a.createElement("p",null,i.join(", "))),n.length>0&&r.a.createElement("div",{className:"Person__movies"},r.a.createElement("h2",null,"Movies"),r.a.createElement(ze,{items:n,id:"movies"})),a.length>0&&r.a.createElement("div",{className:"Person__seasons"},r.a.createElement("h2",null,"TV seasons"),r.a.createElement(ze,{items:a,id:"seasons"}))):r.a.createElement(ot,null)}}]),t}(a.Component)),St=Object(l.b)((function(e){return{movies:e.movies,shows:e.shows,seasons:e.seasons}}))(Nt),It=(n(465),function(e){return r.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"e add"),r.a.createElement("g",{fill:"#ffffff",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"3"},r.a.createElement("line",{fill:"none",stroke:"#ffffff",x1:"16",x2:"16",y1:"2",y2:"30"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",x1:"30",x2:"2",y1:"16",y2:"16"})))}),Ct=function(e){return r.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"logo dropbox 2"),r.a.createElement("g",{fill:"#ffffff"},r.a.createElement("polygon",{fill:"#ffffff",points:"9.41319,1.11824 0,7.26432 6.50879,12.47649 15.99985,6.61586 "}),r.a.createElement("polygon",{fill:"#ffffff",points:"0,17.68899 9.41319,23.83504 15.99985,18.33712 6.50879,12.47649 "}),r.a.createElement("polygon",{fill:"#ffffff",points:"15.99985,18.33712 22.58681,23.83504 32,17.68899 25.49121,12.47649 "}),r.a.createElement("polygon",{fill:"#ffffff",points:"32,7.26432 22.58681,1.11824 15.99985,6.61586 25.49121,12.47649 "}),r.a.createElement("polygon",{points:"16.01932,19.51992 9.41319,25.00165 6.58635,23.15606 6.58635,25.22512 16.01932,30.88176 25.45226,25.22512 25.45226,23.15606 22.62543,25.00165 "})))},Dt=function(e){return r.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"google 2"),r.a.createElement("g",{fill:"#ffffff"},r.a.createElement("path",{d:"M30.383,13.273H16.065v6.136H24.18c-1.3,4.091-4.5,5.455-8.18,5.455a8.864,8.864,0,1,1,5.691-15.65L26.15,4.967A15,15,0,1,0,16,31C24.271,31,31.747,25.545,30.383,13.273Z",fill:"#ffffff"})))},Lt=function(e){return r.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"microsoft"),r.a.createElement("g",{fill:"#ffffff"},r.a.createElement("rect",{height:"14",width:"14",fill:"#ffffff",x:"1",y:"1"}),r.a.createElement("rect",{height:"14",width:"14",x:"17",y:"1"}),r.a.createElement("rect",{height:"14",width:"14",x:"1",y:"17"}),r.a.createElement("rect",{height:"14",width:"14",fill:"#ffffff",x:"17",y:"17"})))},At=(n(466),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Banner"},r.a.createElement("h2",null,this.props.title),r.a.createElement("p",null,this.props.text),this.props.linkUrl&&r.a.createElement("a",{href:this.props.linkUrl,target:"_blank",rel:"noopener noreferrer"},this.props.linkText||"Help"))}}]),t}(a.Component)),Pt=function(e){return e.auth},Ut=function(e){return Object(oe.a)(function(e){return Object(oe.a)(Pt,(function(t){return t[e]}))}(e),(function(e){return e.token}))},Mt=function(){return Object(oe.a)(Pt,(function(e){return Object.keys(e).some((function(t){return null!==e[t].error}))}))},Tt=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:last-child").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:last-child").classList.remove("active")}},{key:"index",value:function(){this.props.index()}},{key:"handleAutomaticIndexingChange",value:function(e){this.props.updateSettings(Object(I.a)({},this.props.settings,{automaticIndexing:e.target.value}))}},{key:"render",value:function(){var e,t=this,n=window.newVersionAvailable,a=0===Object.values(g).filter((function(e){return null!==t.props.auth[e].token})).length,i=Mt()({auth:this.props.auth}),s=0===Object.entries(this.props.movies).length&&0===Object.entries(this.props.shows).length;return r.a.createElement("div",{className:"Settings"},n&&r.a.createElement(At,{title:"Update available!",text:"Restart the app to apply the changes."}),a&&r.a.createElement(At,{title:"Authenticate with cloud service",text:"To get started, authenticate with the cloud service that hosts your media."}),s&&r.a.createElement(At,{title:"No media found!",text:"We indexed all your authenticated services, but weren't able to find any source files.",linkText:"Getting started with Plaain",linkUrl:"https://github.com/jonhue/plaain#getting-started"}),i&&r.a.createElement(At,{title:"Authentication expired!",text:"Reauthenticate with the failing service."}),r.a.createElement("section",{className:"Settings__auth"},r.a.createElement("h2",null,"Authentication"),r.a.createElement("p",null,"Sign into your cloud to add your movies and TV shows to your library."),r.a.createElement("div",{className:"Settings__auth__scroll"},r.a.createElement("div",{className:"Settings__auth__flex"},r.a.createElement("button",{className:"microsoft ".concat(Ut(g.MICROSOFT)({auth:this.props.auth})&&"primary"," ").concat((e=g.MICROSOFT,Object(oe.a)(Pt,(function(t){return null!==t[e].error})))({auth:this.props.auth})&&"warn"),onClick:this.props.authenticateMicrosoft},r.a.createElement(Lt,{width:32,height:32})),r.a.createElement("button",{disabled:!0,className:"dropbox"},r.a.createElement(Ct,{width:32,height:32})),r.a.createElement("button",{disabled:!0,className:"google"},r.a.createElement(Dt,{width:32,height:32})),r.a.createElement("a",{className:"button",href:"https://github.com/jonhue/plaain",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(It,{width:32,height:32}))))),r.a.createElement("section",{className:"Settings__indexing"},r.a.createElement("h2",null,"Indexing"),r.a.createElement("p",null,"Index to look for new media on your linked services and to fetch the latest metadata."),r.a.createElement("button",{onClick:this.index.bind(this)},"Index"),r.a.createElement("h5",null,"Automatic indexing"),r.a.createElement("p",null,"Index automatically when you launch Plaain after a given time has passed."),r.a.createElement("select",{value:this.props.settings.automaticIndexing,onChange:this.handleAutomaticIndexingChange.bind(this)},r.a.createElement("option",{value:v},"Never"),r.a.createElement("option",{value:b},"Monthly"),r.a.createElement("option",{value:y},"Daily"),r.a.createElement("option",{value:w},"Always"))),r.a.createElement("section",{className:"Settings__version"},r.a.createElement("h2",null,"Version"),r.a.createElement("p",null,"Plaain ","0.0.1",!window.newVersionAvailable&&" (latest)","."),r.a.createElement("p",{className:"small"},"Plaain is ",r.a.createElement("a",{href:"https://github.com/jonhue/plaain",target:"_blank",rel:"noopener noreferrer"},"open-source"),". See the ",r.a.createElement("a",{href:"https://github.com/jonhue/plaain/releases",target:"_blank",rel:"noopener noreferrer"},"changelog"),"."),r.a.createElement("p",{className:"small"},"Note that Plaain may ",r.a.createElement("span",{className:"bold"},"not")," be used to stream pirated content or publicly share your private media library. You may only connect to your private cloud storage.")))}}]),t}(a.Component),Wt=Object(l.b)((function(e){return{auth:e.auth,settings:e.settings,movies:e.movies,shows:e.shows}}),{authenticateMicrosoft:function(){return function(e,t){e(U("Authenticating...")),e(Se(g.MICROSOFT)),(new P).perform().then((function(n){e(Ie(g.MICROSOFT,n)),e({type:"LOADING_STOP"}),t().indexing.lastIndexed||e(Ee())})).catch((function(t){console.log(t),e(Ce(g.MICROSOFT,t)),e({type:"LOADING_STOP"})}))}},index:Ee,updateSettings:function(e){return{type:"SETTINGS_UPDATE",payload:e}}})(Tt),Rt=n(120),Ft=n.n(Rt),qt=(n(467),function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(Ve.a)(this,Object(Ge.a)(t).call(this,e))).moviesIndex=new Ft.a,Object.values(n.props.movies).forEach((function(e){n.moviesIndex.add(e.id,"".concat(e.name,";").concat(e.overview))})),n.showsIndex=new Ft.a,Object.values(n.props.shows).forEach((function(e){n.showsIndex.add(e.id,"".concat(e.name,";").concat(e.overview))})),n.state={query:new URLSearchParams(n.props.location.search).get("q")||"",movies:[],shows:[]},n}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){this.search(new URLSearchParams(this.props.location.search).get("q"))}},{key:"search",value:function(e){var t=this;this.setState({query:e||"",movies:this.moviesIndex.search(e||"").map((function(e){return t.props.movies[e]})),shows:this.showsIndex.search(e||"").map((function(e){return t.props.shows[e]}))})}},{key:"handleInputChange",value:function(e){this.props.history.replace("/app/find?q=".concat(e.target.value)),this.search(e.target.value)}},{key:"render",value:function(){return r.a.createElement("div",{className:"Find"},r.a.createElement("form",null,r.a.createElement("input",{autoFocus:!0,value:this.state.query,placeholder:"Search your library",onChange:this.handleInputChange.bind(this)})),this.state.movies.length>0&&r.a.createElement("section",null,r.a.createElement("h2",null,"Movies"),r.a.createElement(ze,{items:this.state.movies,id:"movies"})),this.state.shows.length>0&&r.a.createElement("section",null,r.a.createElement("h2",null,"TV shows"),r.a.createElement(ze,{items:this.state.shows,id:"shows"})))}}]),t}(a.Component)),Vt=Object(l.b)((function(e){return{movies:e.movies,shows:e.shows}}))(qt),Gt=(n(468),function(e){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height},r.a.createElement("path",{fill:"none",strokeMiterlimit:"10",d:"M2.5 26.5h4l4-6 8 20 10-32 8 26 6-8h4",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",stroke:"#ff2fc1",className:"unPUVPIZ_0"}),r.a.createElement("style",{"data-made-with":"vivus-instant"},".unPUVPIZ_0{stroke-dasharray:108 110;stroke-dashoffset:109;animation:unPUVPIZ_draw_0 750ms ease-in-out 0ms infinite,unPUVPIZ_fade 750ms linear 0ms infinite;}@keyframes unPUVPIZ_draw{100%{stroke-dashoffset:0;}}@keyframes unPUVPIZ_fade{0%{stroke-opacity:1;}100%{stroke-opacity:1;}100%{stroke-opacity:0;}}@keyframes unPUVPIZ_draw_0{0%{stroke-dashoffset: 109}66.66666666666666%{ stroke-dashoffset: 0;}100%{ stroke-dashoffset: 0;}}"))}),Bt=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Loading"},r.a.createElement("div",{className:"Loading__wrapper"},r.a.createElement(Gt,{width:48,height:48}),this.props.caption&&r.a.createElement("p",{className:"small"},this.props.caption)))}}]),t}(a.Component),Yt=(n(469),function(e){return r.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"popcorn"),r.a.createElement("g",{fill:"#ffffff"},r.a.createElement("polygon",{fill:"none",points:"21 7 3 7 5 23 19 23 21 7",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2"}),r.a.createElement("path",{d:"M19,5a3,3,0,0,0-3-3,2.97,2.97,0,0,0-1.47.4,2.986,2.986,0,0,0-5.06,0A2.97,2.97,0,0,0,8,2,3,3,0,0,0,5,5",fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"9",x2:"8",y1:"23",y2:"7"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"15",x2:"16",y1:"23",y2:"7"})))}),Ht=function(e){return r.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"movie 61"),r.a.createElement("g",{fill:"#ffffff"},r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"1",y1:"1",y2:"23"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"23",x2:"23",y1:"1",y2:"23"}),r.a.createElement("rect",{height:"22",width:"14",fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x:"5",y:"1"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"23",y1:"12",y2:"12"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"5",y1:"8",y2:"8"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"5",y1:"4",y2:"4"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"19",x2:"23",y1:"8",y2:"8"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"19",x2:"23",y1:"4",y2:"4"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"19",x2:"23",y1:"20",y2:"20"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"19",x2:"23",y1:"16",y2:"16"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"5",y1:"20",y2:"20"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"5",y1:"16",y2:"16"})))},Zt=function(e){return r.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"desktop screen"),r.a.createElement("g",{fill:"#ffffff"},r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"12",x2:"12",y1:"22",y2:"18"}),r.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"6",x2:"18",y1:"22",y2:"22"}),r.a.createElement("rect",{height:"16",width:"22",fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x:"1",y:"2"})))},Xt=function(e){return r.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"settings gear"),r.a.createElement("g",{fill:"#ffffff",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2"},r.a.createElement("circle",{cx:"12",cy:"12",fill:"none",r:"3"}),r.a.createElement("path",{d:"M20,12a8.049,8.049,0,0,0-.188-1.713l2.714-2.055-2-3.464L17.383,6.094a7.987,7.987,0,0,0-2.961-1.719L14,1H10L9.578,4.375A7.987,7.987,0,0,0,6.617,6.094L3.474,4.768l-2,3.464,2.714,2.055a7.9,7.9,0,0,0,0,3.426L1.474,15.768l2,3.464,3.143-1.326a7.987,7.987,0,0,0,2.961,1.719L10,23h4l.422-3.375a7.987,7.987,0,0,0,2.961-1.719l3.143,1.326,2-3.464-2.714-2.055A8.049,8.049,0,0,0,20,12Z",fill:"none",stroke:"#ffffff"})))},zt=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Nav"},r.a.createElement(o.b,{to:"/app"},r.a.createElement(Yt,{width:24,height:24}),r.a.createElement("p",null,"For you")),r.a.createElement(o.b,{disabled:0===Object.entries(this.props.movies).length,to:"/app/movies"},r.a.createElement(Ht,{width:24,height:24}),r.a.createElement("p",null,"Movies")),r.a.createElement(o.b,{disabled:0===Object.entries(this.props.shows).length,to:"/app/shows"},r.a.createElement(Zt,{width:24,height:24}),r.a.createElement("p",null,"Shows")),r.a.createElement(o.b,{to:"/app/settings"},r.a.createElement(Xt,{width:24,height:24}),r.a.createElement("p",null,"Settings")))}}]),t}(a.Component),Jt=Object(l.b)((function(e){return{movies:e.movies,shows:e.shows}}))(zt),Kt=function(e){function t(e){var n;return Object(C.a)(this,t),n=Object(Ve.a)(this,Object(Ge.a)(t).call(this,e)),new P,n}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){new He(this.props.version,this.props.index).perform()||new Ye(this.props.automaticIndexing,this.props.lastIndexed,this.props.index).perform()}},{key:"render",value:function(){return this.props.loading?r.a.createElement(Bt,{caption:this.props.loading}):r.a.createElement("div",{className:"App"},Mt()({auth:this.props.auth})&&r.a.createElement(c.a,{to:"".concat(this.props.match.path,"/settings")}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"".concat(this.props.match.path,"/"),exact:!0,component:tt}),r.a.createElement(c.b,{path:"".concat(this.props.match.path,"/movies"),component:st}),r.a.createElement(c.b,{path:"".concat(this.props.match.path,"/movie/:id"),exact:!0,component:yt}),r.a.createElement(c.b,{path:"".concat(this.props.match.path,"/shows"),component:gt}),r.a.createElement(c.b,{path:"".concat(this.props.match.path,"/show/:id"),exact:!0,component:Ot}),r.a.createElement(c.b,{path:"".concat(this.props.match.path,"/season/:id"),exact:!0,component:xt}),r.a.createElement(c.b,{path:"".concat(this.props.match.path,"/person/:id"),exact:!0,component:St}),r.a.createElement(c.b,{path:"".concat(this.props.match.path,"/settings"),exact:!0,component:Wt}),r.a.createElement(c.b,{path:"".concat(this.props.match.path,"/find"),exact:!0,component:Vt}),r.a.createElement(c.b,{component:ot})),r.a.createElement(Jt,null))}}]),t}(a.Component),$t=Object(l.b)((function(e){return{loading:e.loading,version:e.version,auth:e.auth,lastIndexed:e.indexing.lastIndexed,automaticIndexing:e.settings.automaticIndexing}}),{index:Ee})(Kt),Qt=(n(470),function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Welcome"},r.a.createElement("h1",null,"Your movies & TV shows. Anywhere."),r.a.createElement("div",{className:"Welcome__details"},r.a.createElement("h3",null,"Plaain lets you stream and maintain your media library from anywhere. No server needed, no fee required."),r.a.createElement(o.b,{to:"/app",className:"button primary"},"Launch"),r.a.createElement("a",{href:"https://github.com/jonhue/plaain#getting-started",target:"_blank",rel:"noopener noreferrer",className:"button"},"How it works")))}}]),t}(a.Component)),en=function(e){function t(){return Object(C.a)(this,t),Object(Ve.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object(D.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(a.Component),tn=Object(c.g)(en);n(471);s.a.render(r.a.createElement(l.a,{store:We},r.a.createElement(Re.a,{loading:r.a.createElement(Bt,{caption:"Loading..."}),persistor:Object(p.b)(We)},r.a.createElement(o.a,{basename:"/plaain"},r.a.createElement(tn,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/",exact:!0,component:Qt}),r.a.createElement(c.b,{path:"/app",component:$t}),r.a.createElement(c.b,{component:ot})))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/plaain",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/plaain","/service-worker.js");Fe?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):qe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):qe(t,e)}))}}()}},[[209,1,2]]]);
//# sourceMappingURL=main.92a8900f.chunk.js.map
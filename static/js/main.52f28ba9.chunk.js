(window.webpackJsonpplaain=window.webpackJsonpplaain||[]).push([[0],{207:function(e,t,n){e.exports=n(468)},246:function(e,t){},248:function(e,t){},280:function(e,t){},281:function(e,t){},349:function(e,t){},446:function(e,t,n){},447:function(e,t,n){},448:function(e,t,n){},449:function(e,t,n){},451:function(e,t,n){},452:function(e,t,n){},453:function(e,t,n){},454:function(e,t,n){},455:function(e,t,n){},456:function(e,t,n){},457:function(e,t,n){},458:function(e,t,n){},459:function(e,t,n){},460:function(e,t,n){},461:function(e,t,n){},462:function(e,t,n){},463:function(e,t,n){},464:function(e,t,n){},465:function(e,t,n){},466:function(e,t,n){},467:function(e,t,n){},468:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(83),o=n.n(i),s=n(15),c=n(47),u=n(16),l=n(34),p=n(197),h=n(86),f=n(198),m=n.n(f),d=n(10),v="never",b="monthly",y="daily",w="always",g={MICROSOFT:"microsoft"},O=Object(d.a)({},g.MICROSOFT,"OneDrive"),E="movie",j="show",k="season",_="episode",x={SOURCE:"source",CAPTION:"caption"},N=["mp4","m4v","mkv","webm"],S=["vtt"],P=n(2),I=n(3),D=n(203),C=function(){function e(){Object(P.a)(this,e),this._userAgentApplication=new D.a({auth:{clientId:e.config.clientID}})}return Object(I.a)(e,[{key:"perform",value:function(){return this.silentLogIn()}},{key:"silentLogIn",value:function(){var t=this;return this.userAgentApplication.acquireTokenSilent({scopes:e.config.scopes}).then((function(e){return e.accessToken})).catch((function(e){return console.log(e),t.popupLogIn()}))}},{key:"popupLogIn",value:function(){var t=this;return this.userAgentApplication.loginPopup({scopes:e.config.scopes,prompt:"select_account"}).then((function(){return t.userAgentApplication.acquireTokenSilent({scopes:e.config.scopes})})).then((function(e){return e.accessToken})).catch((function(e){console.log(e)}))}},{key:"userAgentApplication",get:function(){return this._userAgentApplication}}]),e}();C.config={clientID:Object({NODE_ENV:"production",PUBLIC_URL:"/plaain"}).REACT_APP_MICROSOFT_CLIENT_ID,scopes:["user.read","files.read.all"]};var A=C,L=n(1),T=n.n(L),U=n(11),M=n(204),W=function(){function e(t){Object(P.a)(this,e),this._client=M.a.init({authProvider:function(e){return e(null,t)}})}return Object(I.a)(e,[{key:"movies",value:function(){return this.client.api("/me/drive/root:/Plaain/Movies:/children").get()}},{key:"shows",value:function(){return this.client.api("/me/drive/root:/Plaain/Shows:/children").get()}},{key:"children",value:function(e){return this.client.api("/me/drive/items/".concat(e,"/children")).get()}},{key:"client",get:function(){return this._client}}]),e}(),R=function(){function e(t,n){Object(P.a)(this,e),this._oneDrive=t,this._folderId=n}return Object(I.a)(e,[{key:"perform",value:function(){var e=this;return this.oneDrive.children(this.folderId).then((function(t){return t.value.map((function(t){return e.index(t)})).filter((function(e){return null!=e}))}))}},{key:"index",value:function(t){var n=e.fileType(t.name);return null==t.file||null==n?null:{provider:g.MICROSOFT,id:t.id,type:n,name:t.name,extension:e.fileExtension(t.name),information:e.fileInformation(t.name),mimeType:t.file.mimeType,url:t["@microsoft.graph.downloadUrl"]}}},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"folderId",get:function(){return this._folderId}}],[{key:"fileType",value:function(t){return N.includes(e.fileExtension(t))?x.SOURCE:S.includes(e.fileExtension(t))?x.CAPTION:null}},{key:"fileExtension",value:function(e){return e.split(".").pop()}},{key:"fileInformation",value:function(e){return e.split(".").shift()}}]),e}(),F=function(){function e(t){Object(P.a)(this,e),this._oneDrive=new W(t)}return Object(I.a)(e,[{key:"perform",value:function(){var e=Object(U.a)(T.a.mark((function e(){var t=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,this.oneDrive.movies().then((function(e){return e.value.map((function(e){return t.index(e)}))}));case 3:return e.t1=e.sent,e.t2=function(e){return e.filter((function(e){return null!==e}))},e.next=7,e.t0.all.call(e.t0,e.t1).then(e.t2);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"index",value:function(){var e=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,new R(this.oneDrive,t.id).perform();case 4:return n=e.sent,e.abrupt("return",{provider:g.MICROSOFT,type:E,providerId:t.id,name:t.name,files:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}}]),e}(),q=function(){function e(t){Object(P.a)(this,e),this._oneDrive=new W(t)}return Object(I.a)(e,[{key:"perform",value:function(){var e=Object(U.a)(T.a.mark((function e(){var t=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,this.oneDrive.shows().then((function(e){return e.value.map((function(e){return t.index(e)}))}));case 3:return e.t1=e.sent,e.t2=function(e){return e.filter((function(e){return null!==e}))},e.next=7,e.t0.all.call(e.t0,e.t1).then(e.t2);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"index",value:function(){var e=Object(U.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",{provider:g.MICROSOFT,type:j,providerId:t.id,name:t.name});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}}]),e}(),V=n(20);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=function(){function e(t,n,r){Object(P.a)(this,e),this._oneDrive=new W(t),this._shows=n,this._seasons=r}return Object(I.a)(e,[{key:"perform",value:function(){var e=Object(U.a)(T.a.mark((function e(){var t,n=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=(t=[]).concat,e.t1=t,e.t2=V.a,e.next=5,Promise.all(this.shows.map((function(e){return n.performForShow(e,n.seasons)})));case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.abrupt("return",e.t0.apply.call(e.t0,e.t1,e.t4));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"performForShow",value:function(){var e=Object(U.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oneDrive.children(t.providerId).then((function(e){return n.filter((function(e){return e.showId===t.id})).map((function(n){var r=e.value.find((function(e){return n.id==="".concat(t.id,"-").concat(Number.parseInt(e.name))}));return r?B({},n,{provider:g.MICROSOFT,providerId:r.id}):n}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"shows",get:function(){return this._shows}},{key:"seasons",get:function(){return this._seasons}}]),e}();function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(){function e(t,n,r){Object(P.a)(this,e),this._oneDrive=new W(t),this._seasons=n,this._episodes=r}return Object(I.a)(e,[{key:"perform",value:function(){var e=Object(U.a)(T.a.mark((function e(){var t,n=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=(t=[]).concat,e.t1=t,e.t2=V.a,e.next=5,Promise.all(this.seasons.map((function(e){return n.performForSeason(e,n.episodes)})));case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.abrupt("return",e.t0.apply.call(e.t0,e.t1,e.t4));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"performForSeason",value:function(){var e=Object(U.a)(T.a.mark((function e(t,n){var r=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.providerId){e.next=6;break}return e.next=3,this.oneDrive.children(t.providerId).then((function(e){return r.handleResponse(e,t,n)}));case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",n.filter((function(e){return e.seasonId===t.id})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleResponse",value:function(){var e=Object(U.a)(T.a.mark((function e(t,n,r){var a=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.filter((function(e){return e.seasonId===n.id})).map((function(e){return a.index(e,t.value.find((function(t){return e.id==="".concat(n.id,"-").concat(Number.parseInt(t.name))})))})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"index",value:function(){var e=Object(U.a)(T.a.mark((function e(t,n){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,new R(this.oneDrive,n.id).perform();case 3:return r=e.sent,e.abrupt("return",Z({},t,{provider:g.MICROSOFT,providerId:n.id,files:r}));case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"seasons",get:function(){return this._seasons}},{key:"episodes",get:function(){return this._episodes}}]),e}();function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=n(222),$=function(){function e(){Object(P.a)(this,e)}return Object(I.a)(e,[{key:"findMovie",value:function(){var t=Object(U.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",K(J({},e.config,{uri:"".concat(e.base_uri,"/search/movie"),qs:J({},e.config.qs,{query:n})})).then((function(e){return e.results.length<1?null:e.results[0].id})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"findShow",value:function(){var t=Object(U.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",K(J({},e.config,{uri:"".concat(e.base_uri,"/search/tv"),qs:J({},e.config.qs,{query:n})})).then((function(e){return e.results.length<1?null:e.results[0].id})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"movie",value:function(){var t=Object(U.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",K(J({},e.config,{uri:"".concat(e.base_uri,"/movie/").concat(n)})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"movieCredits",value:function(){var t=Object(U.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",K(J({},e.config,{uri:"".concat(e.base_uri,"/movie/").concat(n,"/credits")})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"show",value:function(){var t=Object(U.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",K(J({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n)})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"season",value:function(){var t=Object(U.a)(T.a.mark((function t(n,r){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",K(J({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r)})));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"seasonCredits",value:function(){var t=Object(U.a)(T.a.mark((function t(n,r){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",K(J({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r,"/credits")})));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"episode",value:function(){var t=Object(U.a)(T.a.mark((function t(n,r,a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rateLimiting();case 2:return t.abrupt("return",K(J({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r,"/episode")+"/".concat(a)})));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}],[{key:"rateLimiting",value:function(){var e=Object(U.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,250)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();$.config={qs:{api_key:Object({NODE_ENV:"production",PUBLIC_URL:"/plaain"}).REACT_APP_TMDB_API_KEY,language:"en-US"},headers:{"User-Agent":"Request-Promise"},json:!0},$.base_uri="https://api.themoviedb.org/3";var Q=$,ee=function(){function e(t){Object(P.a)(this,e),this._shows=t,this._tmdb=new Q}return Object(I.a)(e,[{key:"perform",value:function(){var e=Object(U.a)(T.a.mark((function e(){var t,n=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=(t=[]).concat,e.t1=t,e.t2=V.a,e.next=5,Promise.all(this.shows.map((function(e){return n.tmdb.show(e.id).then((function(t){return t.seasons.map((function(t){return{id:"".concat(e.id,"-").concat(t.season_number),type:k,seasonNumber:t.season_number,showId:e.id,providerId:null}}))}))})));case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.abrupt("return",e.t0.apply.call(e.t0,e.t1,e.t4));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shows",get:function(){return this._shows}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),te=function(){function e(t){Object(P.a)(this,e),this._seasons=t,this._tmdb=new Q}return Object(I.a)(e,[{key:"perform",value:function(){var e=Object(U.a)(T.a.mark((function e(){var t,n=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=(t=[]).concat,e.t1=t,e.t2=V.a,e.next=5,Promise.all(this.seasons.map((function(e){return n.tmdb.season(e.showId,e.seasonNumber).then((function(t){return t.episodes.map((function(t){return{id:"".concat(e.id,"-").concat(t.episode_number),type:_,episodeNumber:t.episode_number,seasonId:e.id,providerId:null}}))}))})));case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.abrupt("return",e.t0.apply.call(e.t0,e.t1,e.t4));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"seasons",get:function(){return this._seasons}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),ne=function(e){return{type:"LOADING_BEGIN",payload:e}},re=function(){function e(t){Object(P.a)(this,e),this._string=t}return Object(I.a)(e,[{key:"perform",value:function(){return this.string.toLowerCase().replace(/\s/g,"+")}},{key:"string",get:function(){return this._string}}]),e}(),ae=function(){function e(t){Object(P.a)(this,e),this._movie=t,this._tmdb=new Q}return Object(I.a)(e,[{key:"perform",value:function(){var e=this;return this.tmdb.findMovie(this.movie.name).then((function(t){return e.fetch(t)}))}},{key:"fetch",value:function(){var e=Object(U.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.movie.id=t,this.movie.path="/app/movie/".concat(this.movie.id),null!==this.movie.id){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Promise.all([this.fetchDetails(),this.fetchCredits()]);case 6:return e.abrupt("return",this.movie);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.movie(this.movie.id).then((function(t){e.movie.backdropUrl="https://image.tmdb.org/t/p/original".concat(t.backdrop_path),e.movie.overview=t.overview,e.movie.posterUrl="https://image.tmdb.org/t/p/original".concat(t.poster_path),e.movie.releaseDate=t.release_date,e.movie.runtime=t.runtime,e.movie.name=t.title,e.movie.trailerLink="https://www.youtube.com/results?search_query="+"".concat(new re(e.movie.name).perform(),"+official+trailer")}))}},{key:"fetchCredits",value:function(){var e=this;return this.tmdb.movieCredits(this.movie.id).then((function(t){e.movie.cast=t.cast.map((function(e){return{id:e.id,character:e.character,name:e.name,gender:e.gender,profileUrl:"https://image.tmdb.org/t/p/original".concat(e.profile_path)}})),e.movie.crew=t.crew.map((function(e){return{id:e.id,job:e.job,name:e.name,gender:e.gender,profileUrl:"https://image.tmdb.org/t/p/original".concat(e.profile_path)}}))}))}},{key:"movie",get:function(){return this._movie}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),ie=function e(t){return function(n){return new ae(t).perform().then((function(e){n(se(e))})).catch((function(){return n(e(t))}))}},oe=function(e){return{type:"REMOVE_MOVIE",payload:e}},se=function(e){return{type:"UPDATE_MOVIE",payload:e}},ce=function(){function e(t){Object(P.a)(this,e),this._show=t,this._tmdb=new Q}return Object(I.a)(e,[{key:"perform",value:function(){var e=this;return this.tmdb.findShow(this.show.name).then((function(t){return e.fetch(t)}))}},{key:"fetch",value:function(){var e=Object(U.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.show.id=t,this.show.path="/app/show/".concat(this.show.id),null!==this.show.id){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Promise.all([this.fetchDetails()]);case 6:return e.abrupt("return",this.show);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.show(this.show.id).then((function(t){e.show.backdropUrl="https://image.tmdb.org/t/p/original".concat(t.backdrop_path),e.show.firstAirDate=t.first_air_date,e.show.lastAirDate=t.last_air_date,e.show.name=t.name,e.show.overview=t.overview,e.show.posterUrl="https://image.tmdb.org/t/p/original".concat(t.poster_path)}))}},{key:"show",get:function(){return this._show}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),ue=function e(t){return function(n){return new ce(t).perform().then((function(e){n(pe(e))})).catch((function(){return n(e(t))}))}},le=function(e){return{type:"REMOVE_SHOW",payload:e}},pe=function(e){return{type:"UPDATE_SHOW",payload:e}},he=function(){function e(t,n,r){Object(P.a)(this,e),this._show={id:t,name:n},this._season=r,this._tmdb=new Q}return Object(I.a)(e,[{key:"perform",value:function(){var e=Object(U.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.season.id="".concat(this.show.id,"-").concat(this.season.seasonNumber),this.season.path="/app/season/".concat(this.season.id),e.next=4,Promise.all([this.fetchDetails(),this.fetchCredits()]);case 4:return e.abrupt("return",this.season);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.season(this.show.id,this.season.seasonNumber).then((function(t){e.season.airDate=t.air_date,e.season.name=t.name,e.season.overview=t.overview,e.season.posterUrl="https://image.tmdb.org/t/p/original".concat(t.poster_path),e.season.trailerLink="https://www.youtube.com/results?search_query="+"".concat(new re(e.show.name).perform(),"+")+"".concat(new re(e.season.name).perform(),"+")+"official+trailer&i=movies-tv"}))}},{key:"fetchCredits",value:function(){var e=this;return this.tmdb.seasonCredits(this.show.id,this.season.seasonNumber).then((function(t){e.season.cast=t.cast.map((function(e){return{id:e.id,character:e.character,name:e.name,gender:e.gender,profileUrl:"https://image.tmdb.org/t/p/original".concat(e.profile_path)}})),e.season.crew=t.crew.map((function(e){return{id:e.id,job:e.job,name:e.name,gender:e.gender,profileUrl:"https://image.tmdb.org/t/p/original".concat(e.profile_path)}}))}))}},{key:"show",get:function(){return this._show}},{key:"season",get:function(){return this._season}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),fe=n(14),me=function(e){return e.shows},de=function(e){return Object(fe.a)(me,(function(t){return t[e]}))},ve=function e(t){return function(n,r){var a=de(t.showId)(r());return new he(a.id,a.name,t).perform().then((function(e){n(ye(e))})).catch((function(){return n(e(t))}))}},be=function(e){return{type:"REMOVE_SEASON",payload:e}},ye=function(e){return{type:"UPDATE_SEASON",payload:e}},we=function(){function e(t,n,r,a,i){Object(P.a)(this,e),this._show={id:t,name:n},this._season={seasonNumber:r,name:a},this._episode=i,this._tmdb=new Q}return Object(I.a)(e,[{key:"perform",value:function(){var e=Object(U.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.episode.id="".concat(this.show.id,"-").concat(this.season.seasonNumber,"-")+"".concat(this.episode.episodeNumber),e.next=3,Promise.all([this.fetchDetails()]);case 3:return e.abrupt("return",this.episode);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.episode(this.show.id,this.season.seasonNumber,this.episode.episodeNumber).then((function(t){e.episode.airDate=t.air_date,e.episode.name=t.name,e.episode.overview=t.overview}))}},{key:"show",get:function(){return this._show}},{key:"season",get:function(){return this._season}},{key:"episode",get:function(){return this._episode}},{key:"tmdb",get:function(){return this._tmdb}}]),e}(),ge=function(e){return e.seasons},Oe=function(e){return Object(fe.a)(ge,(function(t){return t[e]}))},Ee=function(){return Object(fe.a)(ge,(function(e){return Object.values(e).filter((function(e){return void 0!==e.progress&&0!==e.progress})).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}))}))},je=function(e){return Object(fe.a)(ge,(function(t){return Object.values(t).filter((function(t){return t.lastWatched>=e.getTime()&&(void 0===t.progress||0===t.progress)})).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}))}))},ke=function(e){return Object(fe.a)(ge,(function(t){return Object.values(t).filter((function(t){return t.showId.toString()===e}))}))},_e=function(e){return Object(fe.a)(ge,(function(t){return Object.values(t).filter((function(t){return t.cast.find((function(t){return t.id===e}))||t.crew.find((function(t){return t.id===e}))}))}))},xe=function(e){return Object(fe.a)(ge,(function(t){return Object.values(t).map((function(e){return e.cast})).flat().filter((function(t){return t.id===e}))}))},Ne=function(e){return Object(fe.a)(ge,(function(t){return Object.values(t).map((function(e){return e.crew})).flat().filter((function(t){return t.id===e}))}))},Se=function e(t){return function(n,r){var a=Oe(t.seasonId)(r()),i=de(a.showId)(r());return new we(i.id,i.name,a.seasonNumber,a.name,t).perform().then((function(e){n(Ie(e))})).catch((function(){return n(e(t))}))}},Pe=function(e){return{type:"REMOVE_EPISODE",payload:e}},Ie=function(e){return{type:"UPDATE_EPISODE",payload:e}},De=function(){return function(e,t){e(ne("Indexing...")),e(Te()),new F(t().auth[g.MICROSOFT].token).perform().then((function(n){return Ce(e,n.map((function(e){return e.id})),Object.keys(t().movies),oe),Ae(e,n,ie)})).then((function(){return new q(t().auth[g.MICROSOFT].token).perform()})).then((function(n){return Ce(e,n.map((function(e){return e.id})),Object.keys(t().shows),le),Ae(e,n,ue)})).then((function(){return new ee(Object.values(t().shows)).perform()})).then((function(e){return new Y(t().auth[g.MICROSOFT].token,Object.values(t().shows),e).perform()})).then((function(n){return Ce(e,n.map((function(e){return e.id})),Object.keys(t().seasons),be),Ae(e,n,ve)})).then((function(){return new te(Object.values(t().seasons)).perform()})).then((function(e){return new X(t().auth[g.MICROSOFT].token,Object.values(t().seasons),e).perform()})).then((function(n){return Ce(e,n.map((function(e){return e.id})),Object.keys(t().episodes),Pe),Ae(e,n,Se)})).then((function(){e(function(e){return{type:"UPDATE_VERSION",payload:e}}("0.0.1")),e(Ue()),e({type:"LOADING_STOP"})})).catch((function(t){console.log(t),e(Me(t)),e({type:"LOADING_STOP"}),401===t.statusCode&&e(We(g.MICROSOFT))}))}};function Ce(e,t,n,r){n.forEach((function(n){t.includes(n)||e(r(n))}))}function Ae(e,t,n){return Le.apply(this,arguments)}function Le(){return(Le=Object(U.a)(T.a.mark((function e(t,n,r){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map((function(e){return t(r(e))})));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Te=function(){return{type:"INDEX_BEGIN"}},Ue=function(){return{type:"INDEX_SUCCESS"}},Me=function(e){return{type:"INDEX_FAILURE",payload:e}},We=function(e){return function(t){return t(qe(e,"expired"))}},Re=function(e){return{type:"LOG_IN_BEGIN",payload:e}},Fe=function(e,t){return{type:"LOG_IN_SUCCESS",payload:{provider:e,token:t}}},qe=function(e,t){return{type:"LOG_IN_FAILURE",payload:{provider:e,error:t}}};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=Object.values(g).reduce((function(e,t){return Ge({},e,Object(d.a)({},t,{token:null,error:null}))}),{});function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze={automaticIndexing:v};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je={lastIndexed:0,error:null},Ke=n(46);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var lt=Object(l.c)({version:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.0.1",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_VERSION":return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN_BEGIN":return Ge({},e,Object(d.a)({},t.payload,Ge({},e[t.payload],{error:null})));case"LOG_IN_SUCCESS":return Ge({},e,Object(d.a)({},t.payload.provider,Ge({},e[t.payload.provider],{token:t.payload.token,error:null})));case"LOG_IN_FAILURE":return Ge({},e,Object(d.a)({},t.payload.provider,Ge({},e[t.payload.provider],{error:t.payload.error})));default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS_UPDATE":return He({},e,{},t.payload);default:return e}},indexing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INDEX_BEGIN":return ze({},e,{error:null});case"INDEX_SUCCESS":return ze({},e,{lastIndexed:(new Date).getTime()});case"INDEX_FAILURE":return ze({},e,{error:t.payload});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_BEGIN":return t.payload;case"LOADING_STOP":return!1;default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_MOVIE":var n=t.payload,r=(e[n],Object(Ke.a)(e,[n].map(et)));return r;case"UPDATE_MOVIE":return Qe({},e,Object(d.a)({},t.payload.id,Qe({},e[t.payload.id],{},t.payload)));default:return e}},shows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_SHOW":var n=t.payload,r=(e[n],Object(Ke.a)(e,[n].map(rt)));return r;case"UPDATE_SHOW":return nt({},e,Object(d.a)({},t.payload.id,nt({},e[t.payload.id],{},t.payload)));default:return e}},seasons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_SEASON":var n=t.payload,r=(e[n],Object(Ke.a)(e,[n].map(ot)));return r;case"UPDATE_SEASON":return it({},e,Object(d.a)({},t.payload.id,it({},e[t.payload.id],{},t.payload)));default:return e}},episodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_EPISODE":var n=t.payload,r=(e[n],Object(Ke.a)(e,[n].map(ut)));return r;case"UPDATE_EPISODE":return ct({},e,Object(d.a)({},t.payload.id,ct({},e[t.payload.id],{},t.payload)));default:return e}}}),pt=Object(h.a)({key:"root",storage:m.a,whitelist:["version","auth","settings","indexing","movies","shows","seasons","episodes"],debug:!1},lt),ht=Object(l.d)(pt,Object(l.a)(p.a)),ft=n(200),mt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function dt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),window.newVersionAvailable=!0,t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var vt=n(6),bt=n(5),yt=n(7),wt=(n(446),function(){function e(t,n,r){Object(P.a)(this,e),this._setting=t,this._lastIndexed=n,this._indexAction=r}return Object(I.a)(e,[{key:"perform",value:function(){return this.setting!==v&&((this.setting===w||(new Date).getFullYear()!==new Date(this.lastIndexed).getFullYear()||(new Date).getMonth()!==new Date(this.lastIndexed).getMonth()||this.setting!==b&&(new Date).getDate()!==new Date(this.lastIndexed).getDate())&&(this.indexAction(),!0))}},{key:"setting",get:function(){return this._setting}},{key:"lastIndexed",get:function(){return this._lastIndexed}},{key:"indexAction",get:function(){return this._indexAction}}]),e}()),gt=function(){function e(t,n){Object(P.a)(this,e),this._versionUsedForLastIndex=t,this._indexAction=n}return Object(I.a)(e,[{key:"perform",value:function(){return"0.0.1"!==this.versionUsedForLastIndex&&(this.indexAction(),!0)}},{key:"versionUsedForLastIndex",get:function(){return this._versionUsedForLastIndex}},{key:"indexAction",get:function(){return this._indexAction}}]),e}(),Ot=(n(447),n(87)),Et=(n(194),n(448),n(449),function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return a.a.createElement("img",{className:"Cover",src:this.props.url,alt:this.props.alt,width:this.props.width})}}]),t}(r.Component)),jt=function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){new Ot.a(document.querySelector(".HorizontalSlide#".concat(this.props.id," .swiper-container")),{spaceBetween:15,slidesPerView:"auto",slidesOffsetBefore:20,slidesOffsetAfter:20,grabCursor:!0})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"HorizontalSlide",id:this.props.id},a.a.createElement("div",{className:"swiper-container"},a.a.createElement("div",{className:"swiper-wrapper"},this.props.items.length?this.props.items.map((function(t){return a.a.createElement("div",{className:"swiper-slide",key:t.id,style:{width:e.props.width}},a.a.createElement(s.b,{to:t.path},a.a.createElement(Et,{url:t.posterUrl||"/cover.png",alt:t.name,width:e.props.width})))})):a.a.createElement("div",{className:"swiper-slide"},a.a.createElement("h3",null,"Nothing found.")))))}}]),t}(r.Component),kt=function(e){return e.movies},_t=function(e){return Object(fe.a)(kt,(function(t){return t[e]}))},xt=function(){return Object(fe.a)(kt,(function(e){return Object.values(e).filter((function(e){return void 0!==e.progress&&0!==e.progress&&e.progress/60<.95*e.runtime})).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}))}))},Nt=function(e){return Object(fe.a)(kt,(function(t){return Object.values(t).filter((function(t){return t.lastWatched>=e.getTime()&&(void 0===t.progress||0===t.progress||t.progress/60>=.95*t.runtime)})).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}))}))},St=function(e){return Object(fe.a)(kt,(function(t){return Object.values(t).filter((function(t){return t.cast.find((function(t){return t.id===e}))||t.crew.find((function(t){return t.id===e}))}))}))},Pt=function(e){return Object(fe.a)(kt,(function(t){return Object.values(t).map((function(e){return e.cast})).flat().filter((function(t){return t.id===e}))}))},It=function(e){return Object(fe.a)(kt,(function(t){return Object.values(t).map((function(e){return e.crew})).flat().filter((function(t){return t.id===e}))}))},Dt=function(e){function t(e){var n;Object(P.a)(this,t),n=Object(vt.a)(this,Object(bt.a)(t).call(this,e));var r=new Date;return r.setMonth(r.getMonth()-1),n.state={inProgress:[].concat(Object(V.a)(xt()({movies:n.props.movies})),Object(V.a)(Ee()({seasons:n.props.seasons}))).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1})),recentlyWatched:[].concat(Object(V.a)(Nt(r)({movies:n.props.movies})),Object(V.a)(je(r)({seasons:n.props.seasons}))).sort((function(e,t){return e.lastWatched>t.lastWatched?-1:1}))},n}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:first-child").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:first-child").classList.remove("active")}},{key:"render",value:function(){var e=this;return this.state.inProgress.length>0||this.state.recentlyWatched.length>0?a.a.createElement("div",{className:"ForYou"},this.state.inProgress.length>0&&a.a.createElement("section",null,a.a.createElement("h2",null,"Continue watching"),a.a.createElement(jt,{items:this.state.inProgress,id:"inProgress",width:"200px"})),this.state.recentlyWatched.length>0&&a.a.createElement("section",null,a.a.createElement("h2",null,"Recently watched"),a.a.createElement(jt,{items:this.state.recentlyWatched,id:"recentlyWatched",width:"200px"}))):0===Object.values(g).filter((function(t){return null!==e.props.auth[t].token})).length?a.a.createElement("div",{className:"ForYou"},a.a.createElement("h2",null,"Get started"),a.a.createElement("p",null,"To watch your movies and TV shows, you first have to sign in with the cloud service that hosts your media."),a.a.createElement(s.b,{to:"/app/settings",className:"button"},"Authenticate"),a.a.createElement("p",{className:"small"},"Note that Plaain may ",a.a.createElement("span",{className:"bold"},"not")," be used to stream pirated content or publicly share your private media library. You may only connect to your private cloud storage.")):0===Object.entries(this.props.movies).length&&0===Object.entries(this.props.shows).length?a.a.createElement("div",{className:"ForYou"},a.a.createElement("h2",null,"Get started"),a.a.createElement("p",null,"You signed into a cloud service, but we didn't find any movies or TV shows."),a.a.createElement("p",null,"It's likely that you just have to move some of your files around and create some folders to make it work."),a.a.createElement("p",null,"Reference the getting started guide to learn how to organize your files so that Plaain finds them. After you're done, just re-index."),a.a.createElement("div",{className:"ForYou__buttons"},a.a.createElement("a",{className:"button primary",href:"https://github.com/jonhue/plaain#getting-started",target:"_blank",rel:"noopener noreferrer"},"Getting started"),a.a.createElement("button",{onClick:this.props.index},"Index"))):a.a.createElement("div",{className:"ForYou"},a.a.createElement("h2",null,"Get started"),a.a.createElement("p",null,"Here, you'll be able to find your recently watched movie or the show you didn't finish yet."),a.a.createElement("div",{className:"ForYou__buttons"},Object.entries(this.props.movies).length>0&&a.a.createElement(s.b,{to:"/app/movies",className:"button"},"Discover your movies"),Object.entries(this.props.shows).length>0&&a.a.createElement(s.b,{to:"/app/shows",className:"button"},"Discover your shows")))}}]),t}(r.Component),Ct=Object(u.b)((function(e){return{movies:e.movies,shows:e.shows,seasons:e.seasons,auth:e.auth}}),{index:De})(Dt),At=(n(451),n(452),function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){new Ot.a(document.querySelector(".VerticalSlide#".concat(this.props.id," .swiper-container")),{direction:"vertical",slidesPerView:"auto",grabCursor:!0,effect:"coverflow",coverflowEffect:{rotate:0,stretch:425,depth:150,modifier:1,slideShadows:!1},history:{replaceState:!0,key:this.props.path}})}},{key:"render",value:function(){return a.a.createElement("div",{className:"VerticalSlide",id:this.props.id},a.a.createElement("div",{className:"swiper-container"},a.a.createElement("div",{className:"swiper-wrapper"},this.props.items.length?this.props.items.map((function(e){return a.a.createElement("div",{className:"swiper-slide","data-history":e.id,key:e.id},a.a.createElement(s.b,{to:e.path},a.a.createElement(Et,{url:e.posterUrl||"/cover.png",alt:e.name,width:"100%"})))})):a.a.createElement("div",{className:"swiper-slide"},a.a.createElement("h3",null,"Nothing found.")))))}}]),t}(r.Component)),Lt=function(e){return a.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("title",null,"zoom"),a.a.createElement("g",{fill:"#ffffff"},a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"22",x2:"15.656",y1:"22",y2:"15.656"}),a.a.createElement("circle",{cx:"10",cy:"10",fill:"none",r:"8",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2"})))},Tt=function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(2)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(2)").classList.remove("active")}},{key:"render",value:function(){return a.a.createElement("div",{className:"Movies"},Object.entries(this.props.movies).length>0&&a.a.createElement("div",{className:"Movies__wrapper"},a.a.createElement("div",{className:"Movies__find"},a.a.createElement(s.b,{to:"/app/find"},a.a.createElement(Lt,{width:24,height:24}))),a.a.createElement(At,{items:Object.values(this.props.movies).sort((function(e,t){return e.name<t.name?-1:1})),id:"movies",path:"movies"})))}}]),t}(r.Component),Ut=Object(u.b)((function(e){return{movies:e.movies}}))(Tt),Mt=(n(453),n(454),function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"NotFound"},a.a.createElement("h2",null,"You want to get lost?"),a.a.createElement("p",null,"This path went astray... If you do want to get lost, we recommend ",a.a.createElement("a",{href:"https://www.imdb.com/title/tt6969502/",target:"_blank",rel:"noopener noreferrer"},"Get Lost! ny Mirjam de With"),"."),a.a.createElement("p",null,"If all you're looking for is to get back on track: you can ",a.a.createElement(s.b,{to:"/app"},"find home this way"),"."))}}]),t}(r.Component)),Wt=(n(455),function(e){function t(e){var n;return Object(P.a)(this,t),(n=Object(vt.a)(this,Object(bt.a)(t).call(this,e))).state={wrapped:!0},n}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"toggle",value:function(){this.setState({wrapped:!this.state.wrapped})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"PersonList"},this.props.people.slice(0,this.state.wrapped?10:this.props.people.length).map((function(t,n){return a.a.createElement("p",{key:n},a.a.createElement(s.b,{to:"/app/person/".concat(t.id)},t.name)," \xb7 ",a.a.createElement("span",null,t[e.props.attribute]))})),a.a.createElement("span",{onClick:this.toggle.bind(this)},this.state.wrapped?"Show more":"Show less"))}}]),t}(r.Component)),Rt=n(202),Ft=n.n(Rt),qt=(n(456),n(205)),Vt=function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return a.a.createElement("track",{kind:"captions",label:this.props.caption.information,src:this.props.caption.url,srcLang:qt.a.getCode(this.props.caption.information)||"en",default:this.props.default})}}]),t}(r.Component),Gt=function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return a.a.createElement("source",{src:this.props.source.url,type:this.props.source.mimeType,size:this.props.source.information})}}]),t}(r.Component),Bt=function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.player=new Ft.a(document.querySelector("#player"),{debug:!1}),this.player.on("error",(function(t){console.log(t),e.props.logInExpired(e.props.item.provider)})),this.player.on("timeupdate",(function(t){0!==t.detail.plyr.currentTime&&e.props.updateItemAction({id:e.props.item.id,lastWatched:(new Date).getTime(),progress:t.detail.plyr.currentTime})})),this.player.on("exitfullscreen",(function(){var t=document.querySelector(".PlyrPlayer");t&&!t.dataset.preventExit&&(e.player.stop(),t.style.display="none",e.props.exitedAction&&e.props.exitedAction())})),this.player.on("ended",(function(){e.player.fullscreen.exit(),document.querySelector(".PlyrPlayer").style.display="none",e.props.endedAction&&e.props.endedAction()}))}},{key:"render",value:function(){return 0===this.props.item.files.filter((function(e){return e.type===x.SOURCE})).length?null:a.a.createElement("div",{className:"PlyrPlayer"},a.a.createElement("video",{src:this.props.item.files.filter((function(e){return e.type===x.SOURCE}))[0].url,id:"player",crossOrigin:"true",playsInline:!0,controls:!0},this.props.item.files.filter((function(e){return e.type===x.SOURCE})).map((function(e,t){return a.a.createElement(Gt,{source:e,key:t})})),this.props.item.files.filter((function(e){return e.type===x.CAPTION})).map((function(e,t){return a.a.createElement(Vt,{caption:e,default:0===t,key:t})})),a.a.createElement("a",{href:this.props.item.files.filter((function(e){return e.type===x.SOURCE}))[0].src,download:!0},"Download")))}}]),t}(r.Component),Yt=Object(u.b)(null,{logInExpired:We})(Bt),Ht=function(e){function t(e){var n;return Object(P.a)(this,t),(n=Object(vt.a)(this,Object(bt.a)(t).call(this,e))).state={movie:_t(n.props.match.params.id)({movies:n.props.movies})},n}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(2)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(2)").classList.remove("active")}},{key:"continue",value:function(){this.watch(this.state.movie.progress)}},{key:"watch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.querySelector(".PlyrPlayer"),n=t.querySelector("#player").plyr;t.dataset.preventExit=!0,setTimeout((function(){t.style.display="block",n.fullscreen.enter(),n.play(),n.currentTime=e,setTimeout((function(){delete t.dataset.preventExit}),100)}),100)}},{key:"finishedMovie",value:function(){this.props.updateMovie({id:this.state.movie.id,progress:0})}},{key:"render",value:function(){var e=this;return this.state.movie?a.a.createElement("div",{className:"Movie"},this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).length>0&&a.a.createElement(Yt,{item:this.state.movie,updateItemAction:this.props.updateMovie,endedAction:this.finishedMovie.bind(this)}),a.a.createElement("img",{className:"Movie__backdrop",src:this.state.movie.backdropUrl,alt:"backdrop"}),a.a.createElement("div",{className:"Movie__details"},a.a.createElement(Et,{url:this.state.movie.posterUrl,alt:"poster",width:"50%"}),a.a.createElement("h1",null,this.state.movie.name),a.a.createElement("div",{className:"Movie__information"},a.a.createElement("p",{className:"small"},new Date(this.state.movie.releaseDate).getFullYear()),a.a.createElement("p",{className:"small"},0!==Math.floor(this.state.movie.runtime/60)&&"".concat(Math.floor(this.state.movie.runtime/60),"h")," ",this.state.movie.runtime%60!==0&&"".concat(this.state.movie.runtime%60,"m"))),a.a.createElement("div",{className:"Movie__actions"},this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).length>0&&void 0!==this.state.movie.progress&&0!==this.state.movie.progress&&this.state.movie.progress/60<this.state.movie.runtime&&a.a.createElement("button",{className:"primary",id:"continue",onClick:this.continue.bind(this)},"Continue"),this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).length>0&&a.a.createElement("button",{className:void 0===this.state.movie.progress||0===this.state.movie.progress||this.state.movie.progress/60>=this.state.movie.runtime?"primary":"",id:"watch",onClick:function(){return e.watch()}},"Watch"),a.a.createElement("a",{className:"button",id:"trailer",href:this.state.movie.trailerLink,target:"_blank",rel:"noopener noreferrer"},"Play trailer")),a.a.createElement("p",{className:"Movie__overview"},this.state.movie.overview),a.a.createElement("div",{className:"Movie__cast"},a.a.createElement("h4",null,"Starring"),a.a.createElement(Wt,{people:this.state.movie.cast,attribute:"character"})),a.a.createElement("div",{className:"Movie__crew"},a.a.createElement("h4",null,"Crew"),a.a.createElement(Wt,{people:this.state.movie.crew,attribute:"job"}))),a.a.createElement("div",{className:"Movie__sources"},a.a.createElement("h4",null,"Sources"),a.a.createElement("p",{className:"small"},"Hosted on ",O[this.state.movie.provider]),a.a.createElement("div",null,a.a.createElement("div",{className:"Movie__sources__versions"},a.a.createElement("h5",null,"Versions"),this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).map((function(e,t){return a.a.createElement("p",{className:"small",key:t},e.information)})),0===this.state.movie.files.filter((function(e){return e.type===x.SOURCE})).length&&a.a.createElement("p",{className:"small"},"-")),a.a.createElement("div",{className:"Movie__sources__captions"},a.a.createElement("h5",null,"Subtitles"),this.state.movie.files.filter((function(e){return e.type===x.CAPTION})).map((function(e,t){return a.a.createElement("p",{className:"small",key:t},e.information)})),0===this.state.movie.files.filter((function(e){return e.type===x.CAPTION})).length&&a.a.createElement("p",{className:"small"},"-"))))):a.a.createElement(Mt,null)}}]),t}(r.Component),Zt=Object(u.b)((function(e){return{movies:e.movies}}),{updateMovie:se})(Ht),Xt=(n(457),function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.remove("active")}},{key:"render",value:function(){return a.a.createElement("div",{className:"Shows"},Object.entries(this.props.shows).length>0&&a.a.createElement("div",{className:"Shows__wrapper"},a.a.createElement("div",{className:"Shows__find"},a.a.createElement(s.b,{to:"/app/find"},a.a.createElement(Lt,{width:24,height:24}))),a.a.createElement(At,{items:Object.values(this.props.shows).sort((function(e,t){return e.name<t.name?-1:1})),id:"shows",path:"shows"})))}}]),t}(r.Component)),zt=Object(u.b)((function(e){return{shows:e.shows}}))(Xt),Jt=(n(458),function(e){function t(e){var n;return Object(P.a)(this,t),(n=Object(vt.a)(this,Object(bt.a)(t).call(this,e))).state={show:de(n.props.match.params.id)({shows:n.props.shows}),seasons:ke(n.props.match.params.id)({seasons:n.props.seasons})},n}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.remove("active")}},{key:"render",value:function(){return this.state.show?a.a.createElement("div",{className:"Show"},a.a.createElement("img",{className:"Show__backdrop",src:this.state.show.backdropUrl,alt:"backdrop"}),a.a.createElement("div",{className:"Show__details"},a.a.createElement(Et,{url:this.state.show.posterUrl,alt:"poster",width:"50%"}),a.a.createElement("h1",null,this.state.show.name),a.a.createElement("div",{className:"Show__information"},a.a.createElement("p",{className:"small"},new Date(this.state.show.firstAirDate).getFullYear()," - ",new Date(this.state.show.lastAirDate).getFullYear())),a.a.createElement("p",{className:"Show__overview"},this.state.show.overview)),this.state.seasons.length>0&&a.a.createElement("div",{className:"Show__seasons"},a.a.createElement("h2",null,"Seasons"),a.a.createElement(jt,{items:this.state.seasons.sort((function(e,t){return e.seasonNumber<t.seasonNumber?-1:1})),id:"seasons",width:"200px"}))):a.a.createElement(Mt,null)}}]),t}(r.Component)),Kt=Object(u.b)((function(e){return{shows:e.shows,seasons:e.seasons}}))(Jt),$t=(n(459),function(e){return e.episodes}),Qt=function(e){return Object(fe.a)($t,(function(t){return Object.values(t).filter((function(t){return t.seasonId===e}))}))},en=function(e){function t(e){var n;return Object(P.a)(this,t),(n=Object(vt.a)(this,Object(bt.a)(t).call(this,e))).state={season:Oe(n.props.match.params.id)({seasons:n.props.seasons}),episodes:Qt(n.props.match.params.id)({episodes:n.props.episodes}),watchableEpisodes:Qt(n.props.match.params.id)({episodes:n.props.episodes}).filter((function(e){return void 0!==e.provider&&0!==e.files.filter((function(e){return e.type===x.SOURCE})).length})),episodesWrapped:!0},n.state.currentEpisodeNumber=n.state.watchableEpisodes.length>0&&n.state.watchableEpisodes[0].episodeNumber,n}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:nth-child(3)").classList.remove("active")}},{key:"toggleEpisodes",value:function(){this.setState({episodesWrapped:!this.state.episodesWrapped})}},{key:"continue",value:function(){this.watch(this.state.season.progress||0,this.state.episodes[this.state.season.progress-1].progress||0)}},{key:"watch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.setState({currentEpisodeNumber:e}),this.props.updateSeason({id:this.state.season.id,lastWatched:(new Date).getTime(),progress:e});var n=document.querySelector(".PlyrPlayer"),r=n.querySelector("#player").plyr;n.dataset.preventExit=!0,setTimeout((function(){n.style.display="block",r.fullscreen.enter(),r.play(),r.currentTime=t,setTimeout((function(){delete n.dataset.preventExit}),100)}),100)}},{key:"stoppedEpisode",value:function(){}},{key:"finishedEpisode",value:function(){this.props.updateEpisode({id:this.state.episodes[this.state.currentEpisodeNumber-1].id,progress:0});var e=0;this.state.episodes[this.state.currentEpisodeNumber].files.filter((function(e){return e.type===x.SOURCE})).length>0&&(e=this.state.currentEpisodeNumber+1),this.props.updateSeason({id:this.state.season.id,progress:e})}},{key:"render",value:function(){var e=this;return this.state.season?a.a.createElement("div",{className:"Season"},this.state.watchableEpisodes.length>0&&a.a.createElement(Yt,{item:this.state.episodes[this.state.currentEpisodeNumber-1],updateItemAction:this.props.updateEpisode,exitedAction:this.stoppedEpisode.bind(this),endedAction:this.finishedEpisode.bind(this)}),a.a.createElement("img",{className:"Show__backdrop",src:de(this.state.season.showId)({shows:this.props.shows}).backdropUrl,alt:"backdrop"}),a.a.createElement("div",{className:"Season__details"},a.a.createElement(Et,{url:this.state.season.posterUrl,alt:"poster",width:"50%"}),a.a.createElement("h1",null,"Season ",this.state.season.seasonNumber),a.a.createElement("div",{className:"Season__information"},a.a.createElement("p",{className:"small"},de(this.state.season.showId)({shows:this.props.shows}).name),a.a.createElement("p",{className:"small"},new Date(this.state.season.airDate).getFullYear())),a.a.createElement("div",{className:"Season__actions"},this.state.watchableEpisodes.length>0&&void 0!==this.state.movie.progress&&0!==this.state.season.progress&&a.a.createElement("button",{className:"primary",id:"continue",onClick:this.continue.bind(this)},"Continue episode ",this.state.season.progress),this.state.watchableEpisodes.length>0&&1!==this.state.season.progress&&a.a.createElement("button",{className:void 0===this.state.movie.progress||0===this.state.season.progress?"primary":"",id:"watch",onClick:function(){return e.watch(e.state.watchableEpisodes[0].episodeNumber)}},"Watch episode ",this.state.watchableEpisodes[0].episodeNumber),a.a.createElement("a",{className:"button",id:"trailer",href:this.state.season.trailerLink,target:"_blank",rel:"noopener noreferrer"},"Play trailer")),a.a.createElement("div",{className:"Season__episodes"},this.state.episodes.sort((function(e,t){return e.episodeNumber<t.episodeNumber?-1:1})).slice(0,this.state.episodesWrapped?0:this.state.episodes.length).map((function(t,n){return a.a.createElement("div",{disabled:void 0===e.state.episodes[t.episodeNumber-1].provider||0===e.state.episodes[t.episodeNumber-1].files.filter((function(e){return e.type===x.SOURCE})).length,className:"Season__episodes__episode",onClick:function(){return e.watch(t.episodeNumber)},key:n},a.a.createElement("div",{className:"Season__episodes__episode__number"},t.episodeNumber),a.a.createElement("div",{className:"Season__episodes__episode__details"},a.a.createElement("h2",null,t.name),a.a.createElement("p",{className:"small"},"Aired ",new Date(t.airDate).toDateString()),a.a.createElement("p",null,t.overview)))})),this.state.episodes.length>0&&a.a.createElement("span",{onClick:this.toggleEpisodes.bind(this)},this.state.episodesWrapped?"Show all episodes":"Hide episodes")),a.a.createElement("p",{className:"Season__overview"},this.state.season.overview),a.a.createElement("div",{className:"Season__cast"},a.a.createElement("h4",null,"Starring"),a.a.createElement(Wt,{people:this.state.season.cast,attribute:"character"})),a.a.createElement("div",{className:"Season__crew"},a.a.createElement("h4",null,"Crew"),a.a.createElement(Wt,{people:this.state.season.crew,attribute:"job"})))):a.a.createElement(Mt,null)}}]),t}(r.Component),tn=Object(u.b)((function(e){return{shows:e.shows,seasons:e.seasons,episodes:e.episodes}}),{updateSeason:ye,updateEpisode:Ie})(en),nn=(n(460),function(e){return Object(fe.a)(Pt(e),It(e),xe(e),Ne(e),(function(e,t,n,r){return[].concat(Object(V.a)(e),Object(V.a)(t),Object(V.a)(n),Object(V.a)(r))[0]}))}),rn=function(e,t){return Object(fe.a)(Pt(e),It(e),xe(e),Ne(e),(function(e,n,r,a){return Object(V.a)(new Set([e.length>0||r.length>0?1===t?"Actress":"Actor":null].concat(Object(V.a)(n.map((function(e){return e.job}))),Object(V.a)(a.map((function(e){return e.job})))))).filter((function(e){return null!==e}))}))},an=function(e){function t(e){var n;Object(P.a)(this,t),n=Object(vt.a)(this,Object(bt.a)(t).call(this,e));var r=Number.parseInt(n.props.match.params.id);return n.state={person:nn(r)({movies:n.props.movies,seasons:n.props.seasons}),movies:St(r)({movies:n.props.movies}),seasons:_e(r)({seasons:n.props.seasons})},n.state.roles=rn(r,n.state.person.gender)({movies:n.props.movies,seasons:n.props.seasons}),n}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return this.state.person?a.a.createElement("div",{className:"Person"},a.a.createElement("img",{className:"Person__backdrop",src:(this.state.movies[0]||this.props.shows[this.state.seasons[0].showId]).backdropUrl,alt:"backdrop"}),a.a.createElement("div",{className:"Person__details"},a.a.createElement(Et,{url:this.state.person.profileUrl,alt:"profile",width:"50%"}),a.a.createElement("h1",null,this.state.person.name),a.a.createElement("h5",null,"Known as"),a.a.createElement("p",null,this.state.roles.join(", "))),this.state.movies.length>0&&a.a.createElement("section",null,a.a.createElement("h2",null,"Movies"),a.a.createElement(jt,{items:this.state.movies,id:"movies",width:"200px"})),this.state.seasons.length>0&&a.a.createElement("section",null,a.a.createElement("h2",null,"TV seasons"),a.a.createElement(jt,{items:this.state.seasons,id:"seasons",width:"200px"}))):a.a.createElement(Mt,null)}}]),t}(r.Component),on=Object(u.b)((function(e){return{movies:e.movies,shows:e.shows,seasons:e.seasons}}))(an),sn=(n(461),function(e){return a.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("title",null,"e add"),a.a.createElement("g",{fill:"#ffffff",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"3"},a.a.createElement("line",{fill:"none",stroke:"#ffffff",x1:"16",x2:"16",y1:"2",y2:"30"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",x1:"30",x2:"2",y1:"16",y2:"16"})))}),cn=function(e){return a.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("title",null,"logo dropbox 2"),a.a.createElement("g",{fill:"#ffffff"},a.a.createElement("polygon",{fill:"#ffffff",points:"9.41319,1.11824 0,7.26432 6.50879,12.47649 15.99985,6.61586 "}),a.a.createElement("polygon",{fill:"#ffffff",points:"0,17.68899 9.41319,23.83504 15.99985,18.33712 6.50879,12.47649 "}),a.a.createElement("polygon",{fill:"#ffffff",points:"15.99985,18.33712 22.58681,23.83504 32,17.68899 25.49121,12.47649 "}),a.a.createElement("polygon",{fill:"#ffffff",points:"32,7.26432 22.58681,1.11824 15.99985,6.61586 25.49121,12.47649 "}),a.a.createElement("polygon",{points:"16.01932,19.51992 9.41319,25.00165 6.58635,23.15606 6.58635,25.22512 16.01932,30.88176 25.45226,25.22512 25.45226,23.15606 22.62543,25.00165 "})))},un=function(e){return a.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("title",null,"google 2"),a.a.createElement("g",{fill:"#ffffff"},a.a.createElement("path",{d:"M30.383,13.273H16.065v6.136H24.18c-1.3,4.091-4.5,5.455-8.18,5.455a8.864,8.864,0,1,1,5.691-15.65L26.15,4.967A15,15,0,1,0,16,31C24.271,31,31.747,25.545,30.383,13.273Z",fill:"#ffffff"})))},ln=function(e){return a.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("title",null,"microsoft"),a.a.createElement("g",{fill:"#ffffff"},a.a.createElement("rect",{height:"14",width:"14",fill:"#ffffff",x:"1",y:"1"}),a.a.createElement("rect",{height:"14",width:"14",x:"17",y:"1"}),a.a.createElement("rect",{height:"14",width:"14",x:"1",y:"17"}),a.a.createElement("rect",{height:"14",width:"14",fill:"#ffffff",x:"17",y:"17"})))},pn=(n(462),function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Banner"},a.a.createElement("h2",null,this.props.title),a.a.createElement("p",null,this.props.text),this.props.linkUrl&&a.a.createElement("a",{href:this.props.linkUrl,target:"_blank",rel:"noopener noreferrer"},this.props.linkText||"Help"))}}]),t}(r.Component)),hn=function(e){return e.auth},fn=function(e){return Object(fe.a)(function(e){return Object(fe.a)(hn,(function(t){return t[e]}))}(e),(function(e){return e.token}))},mn=function(){return Object(fe.a)(hn,(function(e){return Object.keys(e).some((function(t){return null!==e[t].error}))}))};function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vn=function(e){function t(e){var n;return Object(P.a)(this,t),(n=Object(vt.a)(this,Object(bt.a)(t).call(this,e))).state={newVersionAvailable:window.newVersionAvailable,notAuthenticated:0===Object.values(g).filter((function(e){return null!==n.props.auth[e].token})).length,authenticationExpired:mn()({auth:n.props.auth}),noMediaFound:0===Object.entries(n.props.movies).length&&0===Object.entries(n.props.shows).length},n}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".Nav a:last-child").classList.add("active")}},{key:"componentWillUnmount",value:function(){document.querySelector(".Nav a:last-child").classList.remove("active")}},{key:"index",value:function(){this.props.index()}},{key:"handleAutomaticIndexingChange",value:function(e){this.props.updateSettings(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props.settings,{automaticIndexing:e.target.value}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"Settings"},this.state.newVersionAvailable&&a.a.createElement(pn,{title:"Update available!",text:"Restart the app to apply the changes."}),this.state.notAuthenticated&&a.a.createElement(pn,{title:"Authenticate with cloud service",text:"To get started, authenticate with the cloud service that hosts your media."}),this.state.noMediaFound&&a.a.createElement(pn,{title:"No media found!",text:"We indexed all your authenticated services, but weren't able to find any source files.",linkText:"Getting started with Plaain",linkUrl:"https://github.com/jonhue/plaain#getting-started"}),this.state.authenticationExpired&&a.a.createElement(pn,{title:"Authentication expired!",text:"Reauthenticate with the failing service."}),a.a.createElement("section",{className:"Settings__auth"},a.a.createElement("h2",null,"Authentication"),a.a.createElement("p",null,"Sign into your cloud to add your movies and TV shows to your library."),a.a.createElement("div",{className:"Settings__auth__scroll"},a.a.createElement("div",{className:"Settings__auth__flex"},a.a.createElement("button",{className:"microsoft ".concat(fn(g.MICROSOFT)({auth:this.props.auth})&&"primary"," ").concat((e=g.MICROSOFT,Object(fe.a)(hn,(function(t){return null!==t[e].error})))({auth:this.props.auth})&&"warn"),onClick:this.props.authenticateMicrosoft},a.a.createElement(ln,{width:32,height:32})),a.a.createElement("button",{disabled:!0,className:"dropbox"},a.a.createElement(cn,{width:32,height:32})),a.a.createElement("button",{disabled:!0,className:"google"},a.a.createElement(un,{width:32,height:32})),a.a.createElement("a",{className:"button",href:"https://github.com/jonhue/plaain",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(sn,{width:32,height:32}))))),a.a.createElement("section",{className:"Settings__indexing"},a.a.createElement("h2",null,"Indexing"),a.a.createElement("p",null,"Index to look for new media on your linked services and to fetch the latest metadata."),a.a.createElement("button",{onClick:this.index.bind(this)},"Index"),a.a.createElement("h5",null,"Automatic indexing"),a.a.createElement("p",null,"Index automatically when you launch Plaain after a given time has passed."),a.a.createElement("select",{value:this.props.settings.automaticIndexing,onChange:this.handleAutomaticIndexingChange.bind(this)},a.a.createElement("option",{value:v},"Never"),a.a.createElement("option",{value:b},"Monthly"),a.a.createElement("option",{value:y},"Daily"),a.a.createElement("option",{value:w},"Always"))),a.a.createElement("section",{className:"Settings__version"},a.a.createElement("h2",null,"Version"),a.a.createElement("p",null,"Plaain ","0.0.1",!window.newVersionAvailable&&" (latest)","."),a.a.createElement("p",{className:"small"},"Plaain is ",a.a.createElement("a",{href:"https://github.com/jonhue/plaain",target:"_blank",rel:"noopener noreferrer"},"open-source"),". See the ",a.a.createElement("a",{href:"https://github.com/jonhue/plaain/releases",target:"_blank",rel:"noopener noreferrer"},"changelog"),"."),a.a.createElement("p",{className:"small"},"Note that Plaain may ",a.a.createElement("span",{className:"bold"},"not")," be used to stream pirated content or publicly share your private media library. You may only connect to your private cloud storage.")));var e}}]),t}(r.Component),bn=Object(u.b)((function(e){return{auth:e.auth,settings:e.settings,movies:e.movies,shows:e.shows}}),{authenticateMicrosoft:function(){return function(e){e(ne("Authenticating...")),e(Re(g.MICROSOFT)),(new A).perform().then((function(t){e(Fe(g.MICROSOFT,t)),e(De())})).catch((function(t){e(qe(g.MICROSOFT,t)),e({type:"LOADING_STOP"})}))}},index:De,updateSettings:function(e){return{type:"SETTINGS_UPDATE",payload:e}}})(vn),yn=n(118),wn=n.n(yn),gn=(n(463),function(e){function t(e){var n;return Object(P.a)(this,t),(n=Object(vt.a)(this,Object(bt.a)(t).call(this,e))).moviesIndex=new wn.a,Object.values(n.props.movies).forEach((function(e){n.moviesIndex.add(e.id,"".concat(e.name,";").concat(e.overview))})),n.showsIndex=new wn.a,Object.values(n.props.shows).forEach((function(e){n.showsIndex.add(e.id,"".concat(e.name,";").concat(e.overview))})),n.state={query:new URLSearchParams(n.props.location.search).get("q")||"",movies:[],shows:[]},n}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.search(new URLSearchParams(this.props.location.search).get("q"))}},{key:"search",value:function(e){var t=this;this.setState({query:e||"",movies:this.moviesIndex.search(e||"").map((function(e){return t.props.movies[e]})),shows:this.showsIndex.search(e||"").map((function(e){return t.props.shows[e]}))})}},{key:"handleInputChange",value:function(e){this.props.history.replace("/app/find?q=".concat(e.target.value)),this.search(e.target.value)}},{key:"render",value:function(){return a.a.createElement("div",{className:"Find"},a.a.createElement("form",null,a.a.createElement("input",{autoFocus:!0,value:this.state.query,placeholder:"Search your library",onChange:this.handleInputChange.bind(this)})),this.state.movies.length>0&&a.a.createElement("section",null,a.a.createElement("h2",null,"Movies"),a.a.createElement(jt,{items:this.state.movies,id:"movies",width:"200px"})),this.state.shows.length>0&&a.a.createElement("section",null,a.a.createElement("h2",null,"TV shows"),a.a.createElement(jt,{items:this.state.shows,id:"shows",width:"200px"})))}}]),t}(r.Component)),On=Object(u.b)((function(e){return{movies:e.movies,shows:e.shows}}))(gn),En=(n(464),function(e){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height},a.a.createElement("path",{fill:"none",strokeMiterlimit:"10",d:"M2.5 26.5h4l4-6 8 20 10-32 8 26 6-8h4",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",stroke:"#ff2fc1",className:"unPUVPIZ_0"}),a.a.createElement("style",{"data-made-with":"vivus-instant"},".unPUVPIZ_0{stroke-dasharray:108 110;stroke-dashoffset:109;animation:unPUVPIZ_draw_0 750ms ease-in-out 0ms infinite,unPUVPIZ_fade 750ms linear 0ms infinite;}@keyframes unPUVPIZ_draw{100%{stroke-dashoffset:0;}}@keyframes unPUVPIZ_fade{0%{stroke-opacity:1;}100%{stroke-opacity:1;}100%{stroke-opacity:0;}}@keyframes unPUVPIZ_draw_0{0%{stroke-dashoffset: 109}66.66666666666666%{ stroke-dashoffset: 0;}100%{ stroke-dashoffset: 0;}}"))}),jn=function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Loading"},a.a.createElement("div",{className:"Loading__wrapper"},a.a.createElement(En,{width:48,height:48}),this.props.caption&&a.a.createElement("p",{className:"small"},this.props.caption)))}}]),t}(r.Component),kn=(n(465),function(e){return a.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("title",null,"popcorn"),a.a.createElement("g",{fill:"#ffffff"},a.a.createElement("polygon",{fill:"none",points:"21 7 3 7 5 23 19 23 21 7",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2"}),a.a.createElement("path",{d:"M19,5a3,3,0,0,0-3-3,2.97,2.97,0,0,0-1.47.4,2.986,2.986,0,0,0-5.06,0A2.97,2.97,0,0,0,8,2,3,3,0,0,0,5,5",fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"9",x2:"8",y1:"23",y2:"7"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"15",x2:"16",y1:"23",y2:"7"})))}),_n=function(e){return a.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("title",null,"movie 61"),a.a.createElement("g",{fill:"#ffffff"},a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"1",y1:"1",y2:"23"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"23",x2:"23",y1:"1",y2:"23"}),a.a.createElement("rect",{height:"22",width:"14",fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x:"5",y:"1"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"23",y1:"12",y2:"12"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"5",y1:"8",y2:"8"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"5",y1:"4",y2:"4"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"19",x2:"23",y1:"8",y2:"8"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"19",x2:"23",y1:"4",y2:"4"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"19",x2:"23",y1:"20",y2:"20"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"19",x2:"23",y1:"16",y2:"16"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"5",y1:"20",y2:"20"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"1",x2:"5",y1:"16",y2:"16"})))},xn=function(e){return a.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("title",null,"desktop screen"),a.a.createElement("g",{fill:"#ffffff"},a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"12",x2:"12",y1:"22",y2:"18"}),a.a.createElement("line",{fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x1:"6",x2:"18",y1:"22",y2:"22"}),a.a.createElement("rect",{height:"16",width:"22",fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2",x:"1",y:"2"})))},Nn=function(e){return a.a.createElement("svg",{height:e.height,width:e.width,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("title",null,"settings gear"),a.a.createElement("g",{fill:"#ffffff",stroke:"#ffffff",strokeLinecap:"round",strokeWidth:"2"},a.a.createElement("circle",{cx:"12",cy:"12",fill:"none",r:"3"}),a.a.createElement("path",{d:"M20,12a8.049,8.049,0,0,0-.188-1.713l2.714-2.055-2-3.464L17.383,6.094a7.987,7.987,0,0,0-2.961-1.719L14,1H10L9.578,4.375A7.987,7.987,0,0,0,6.617,6.094L3.474,4.768l-2,3.464,2.714,2.055a7.9,7.9,0,0,0,0,3.426L1.474,15.768l2,3.464,3.143-1.326a7.987,7.987,0,0,0,2.961,1.719L10,23h4l.422-3.375a7.987,7.987,0,0,0,2.961-1.719l3.143,1.326,2-3.464-2.714-2.055A8.049,8.049,0,0,0,20,12Z",fill:"none",stroke:"#ffffff"})))},Sn=function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Nav"},a.a.createElement(s.b,{to:"/app"},a.a.createElement(kn,{width:24,height:24})),a.a.createElement(s.b,{disabled:0===Object.entries(this.props.movies).length,to:"/app/movies"},a.a.createElement(_n,{width:24,height:24})),a.a.createElement(s.b,{disabled:0===Object.entries(this.props.shows).length,to:"/app/shows"},a.a.createElement(xn,{width:24,height:24})),a.a.createElement(s.b,{to:"/app/settings"},a.a.createElement(Nn,{width:24,height:24})))}}]),t}(r.Component),Pn=Object(u.b)((function(e){return{movies:e.movies,shows:e.shows}}))(Sn),In=function(e){function t(e){var n;return Object(P.a)(this,t),n=Object(vt.a)(this,Object(bt.a)(t).call(this,e)),new A,n}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){new gt(this.props.version,this.props.index).perform()||new wt(this.props.automaticIndexing,this.props.lastIndexed,this.props.index).perform()}},{key:"render",value:function(){return this.props.loading?a.a.createElement(jn,{caption:this.props.loading}):a.a.createElement("div",{className:"App"},mn()({auth:this.props.auth})&&a.a.createElement(c.a,{to:"".concat(this.props.match.path,"/settings")}),a.a.createElement(c.d,null,a.a.createElement(c.b,{path:"".concat(this.props.match.path,"/"),exact:!0,component:Ct}),a.a.createElement(c.b,{path:"".concat(this.props.match.path,"/movies"),component:Ut}),a.a.createElement(c.b,{path:"".concat(this.props.match.path,"/movie/:id"),exact:!0,component:Zt}),a.a.createElement(c.b,{path:"".concat(this.props.match.path,"/shows"),component:zt}),a.a.createElement(c.b,{path:"".concat(this.props.match.path,"/show/:id"),exact:!0,component:Kt}),a.a.createElement(c.b,{path:"".concat(this.props.match.path,"/season/:id"),exact:!0,component:tn}),a.a.createElement(c.b,{path:"".concat(this.props.match.path,"/person/:id"),exact:!0,component:on}),a.a.createElement(c.b,{path:"".concat(this.props.match.path,"/settings"),exact:!0,component:bn}),a.a.createElement(c.b,{path:"".concat(this.props.match.path,"/find"),exact:!0,component:On}),a.a.createElement(c.b,{component:Mt})),a.a.createElement(Pn,null))}}]),t}(r.Component),Dn=Object(u.b)((function(e){return{loading:e.loading,version:e.version,auth:e.auth,lastIndexed:e.indexing.lastIndexed,automaticIndexing:e.settings.automaticIndexing}}),{index:De})(In),Cn=(n(466),function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Welcome"},a.a.createElement("h1",null,"Your movies & TV shows. Anywhere."),a.a.createElement("div",{className:"Welcome__details"},a.a.createElement("h3",null,"Plaain lets you stream and maintain your media library from anywhere. No server needed, no fee required."),a.a.createElement(s.b,{to:"/app",className:"button primary"},"Launch"),a.a.createElement("a",{href:"https://github.com/jonhue/plaain#getting-started",target:"_blank",rel:"noopener noreferrer",className:"button"},"How it works")))}}]),t}(r.Component)),An=function(e){function t(){return Object(P.a)(this,t),Object(vt.a)(this,Object(bt.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),Object(I.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(r.Component),Ln=Object(c.g)(An);n(467);o.a.render(a.a.createElement(u.a,{store:ht},a.a.createElement(ft.a,{loading:a.a.createElement(jn,{caption:"Loading..."}),persistor:Object(h.b)(ht)},a.a.createElement(s.a,{basename:"/plaain"},a.a.createElement(Ln,null,a.a.createElement(c.d,null,a.a.createElement(c.b,{path:"/",exact:!0,component:Cn}),a.a.createElement(c.b,{path:"/app",component:Dn}),a.a.createElement(c.b,{component:Mt})))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/plaain",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/plaain","/service-worker.js");mt?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):dt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):dt(t,e)}))}}()}},[[207,1,2]]]);
//# sourceMappingURL=main.52f28ba9.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,n){e.exports=n(486)},282:function(e,t){},284:function(e,t){},316:function(e,t){},317:function(e,t){},386:function(e,t){},484:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(205),o=n.n(a),c=n(83),u=n(30),s=n(207),f=n(63),l=n(119),p=n.n(l),h=n(7),m=n(1),d=n(2),v=n(208),b=function(){function e(){Object(m.a)(this,e),this._userAgentApplication=new v.UserAgentApplication(e.config.clientID,"https://login.microsoftonline.com/common",null)}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.logIn().then(function(t){return{token:t,user:e.userAgentApplication.getUser()}})}},{key:"logIn",value:function(){var t=this;return this.userAgentApplication.loginPopup(e.config.graphScopes).then(function(){return t.userAgentApplication.acquireTokenSilent(e.config.graphScopes).then(function(e){return e}).catch(function(){return t.userAgentApplication.acquireTokenPopup(e.config.graphScopes).then(function(e){return e})})})}},{key:"userAgentApplication",get:function(){return this._userAgentApplication}}]),e}();b.config={clientID:"c06abdd7-3e36-4e51-9ecf-8e304a3fe37f",graphScopes:["user.read","files.read.all"]};var y=b,w=n(209),O=function(){function e(t){Object(m.a)(this,e),this._client=w.Client.init({authProvider:function(e){return e(null,t)}})}return Object(d.a)(e,[{key:"movies",value:function(){return this.client.api("/me/drive/root:/Plaain/Movies:/children").get()}},{key:"shows",value:function(){return this.client.api("/me/drive/root:/Plaain/Shows:/children").get()}},{key:"children",value:function(e){return this.client.api("/me/drive/items/".concat(e,"/children")).get()}},{key:"client",get:function(){return this._client}}]),e}(),g=n(3),j=n.n(g),k=n(10),_="library",E="recommended",x="indexed",I="fetched",D="movie",N="show",C="season",A="episode",S="source",L="caption",P=["mp4","m4v","mkv","webm"],U=["vtt"],z=function(){function e(t,n){Object(m.a)(this,e),this._oneDrive=t,this._folderId=n}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.oneDrive.children(this.folderId).then(function(t){return t.value.map(function(t){return e.index(t)}).filter(function(e){return null!=e})})}},{key:"index",value:function(t){var n=e.fileType(t.name);return null==t.file||null==n?null:{id:t.id,type:n,name:t.name,extension:e.fileExtension(t.name),information:e.fileInformation(t.name),mimeType:t.file.mimeType,url:t["@microsoft.graph.downloadUrl"]}}},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"folderId",get:function(){return this._folderId}}],[{key:"fileType",value:function(t){return P.includes(e.fileExtension(t))?S:U.includes(e.fileExtension(t))?L:null}},{key:"fileExtension",value:function(e){return e.split(".").pop()}},{key:"fileInformation",value:function(e){return e.split(".").shift()}}]),e}(),R=function(){function e(t){Object(m.a)(this,e),this._oneDrive=t}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.oneDrive.movies().then(function(t){return t.value.map(function(t){return e.index(t)})})}},{key:"index",value:function(){var e=Object(k.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,new z(this.oneDrive,t.id).perform();case 4:return n=e.sent,e.abrupt("return",{type:D,state:x,role:n.filter(function(e){return e.type===S}).length>0?_:E,id:t.id,name:t.name,files:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}}]),e}(),q=function(){function e(t,n){Object(m.a)(this,e),this._oneDrive=t,this._folderId=n}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.oneDrive.children(this.folderId).then(function(t){return t.value.map(function(t){return e.index(t)})}).then(function(e){return Promise.all(e).then(function(e){return e.filter(function(e){return null!=e})})})}},{key:"index",value:function(){var e=Object(k.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder&&!Number.isNaN(t.name)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,new z(this.oneDrive,t.id).perform();case 4:return n=e.sent,e.abrupt("return",{type:A,state:x,role:n.filter(function(e){return e.type===S}).length>0?_:E,id:t.id,episodeNumber:Number.parseInt(t.name),files:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"folderId",get:function(){return this._folderId}}]),e}(),T=function(){function e(t,n){Object(m.a)(this,e),this._oneDrive=t,this._folderId=n}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.oneDrive.children(this.folderId).then(function(t){return t.value.map(function(t){return e.index(t)})}).then(function(e){return Promise.all(e).then(function(e){return e.filter(function(e){return null!=e})})})}},{key:"index",value:function(){var e=Object(k.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder&&!Number.isNaN(t.name)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,new q(this.oneDrive,t.id).perform();case 4:return n=e.sent,e.abrupt("return",{type:C,state:x,role:n.filter(function(e){return e.role===_}).length>0?_:E,id:t.id,seasonNumber:Number.parseInt(t.name),episodes:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}},{key:"folderId",get:function(){return this._folderId}}]),e}(),W=function(){function e(t){Object(m.a)(this,e),this._oneDrive=t}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.oneDrive.shows().then(function(t){return t.value.map(function(t){return e.index(t)})})}},{key:"index",value:function(){var e=Object(k.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.folder){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,new T(this.oneDrive,t.id).perform();case 4:return n=e.sent,e.abrupt("return",{type:N,state:x,role:n.filter(function(e){return e.role===_}).length>0?_:E,id:t.id,name:t.name,seasons:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"oneDrive",get:function(){return this._oneDrive}}]),e}(),G=function(){function e(t){Object(m.a)(this,e),this._oneDrive=new O(t)}return Object(d.a)(e,[{key:"perform",value:function(){return Promise.all([new R(this.oneDrive).perform().then(function(e){return{movies:Promise.all(e).then(function(e){return e.filter(function(e){return null!=e})})}}),new W(this.oneDrive).perform().then(function(e){return{shows:Promise.all(e).then(function(e){return e.filter(function(e){return null!=e})})}})]).then(function(e){return Object.assign({},e[0],e[1])})}},{key:"oneDrive",get:function(){return this._oneDrive}}]),e}(),M=n(258),F=function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,[{key:"findMovie",value:function(){var t=Object(k.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/search/movie"),qs:Object(h.a)({},e.config.qs,{query:n})})).then(function(e){return e.results.length<1?null:e.results[0].id}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"findShow",value:function(){var t=Object(k.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/search/tv"),qs:Object(h.a)({},e.config.qs,{query:n})})).then(function(e){return e.results.length<1?null:e.results[0].id}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"movie",value:function(){var t=Object(k.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/movie/").concat(n)})));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"movieCredits",value:function(){var t=Object(k.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/movie/").concat(n,"/credits")})));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"movieVideos",value:function(){var t=Object(k.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/movie/").concat(n,"/videos")})));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"show",value:function(){var t=Object(k.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n)})));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"season",value:function(){var t=Object(k.a)(j.a.mark(function t(n,r){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r)})));case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"seasonCredits",value:function(){var t=Object(k.a)(j.a.mark(function t(n,r){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r,"/credits")})));case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"seasonVideos",value:function(){var t=Object(k.a)(j.a.mark(function t(n,r){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r,"/videos")})));case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"episode",value:function(){var t=Object(k.a)(j.a.mark(function t(n,r,i){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M(Object(h.a)({},e.config,{uri:"".concat(e.base_uri,"/tv/").concat(n,"/season/").concat(r,"/episode/").concat(i)})));case 1:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();F.config={qs:{api_key:"7a10886d19bdc8b264b9d570eaf54e68",language:"en-US"},headers:{"User-Agent":"Request-Promise"},json:!0},F.base_uri="https://api.themoviedb.org/3";var B=F,V=function(){function e(t){Object(m.a)(this,e),this._movie=Object(h.a)({},t),this._tmdb=new B}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.tmdb.findMovie(this.movie.name).then(function(t){return e.movie.tmdbId=t,e.fetch(),e.movie})}},{key:"fetch",value:function(){var e=Object(k.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchDetails(),this.fetchCredits()]);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var t=this;return this.tmdb.movie(this.movie.tmdbId).then(function(n){t.movie.state=I,t.movie.backdropUrl="https://image.tmdb.org/t/p/original".concat(n.backdrop_path),t.movie.overview=n.overview,t.movie.posterUrl="https://image.tmdb.org/t/p/original".concat(n.poster_path),t.movie.releaseDate=n.release_date,t.movie.runtime=n.runtime,t.movie.name=n.title,t.movie.affiliateLink="https://www.amazon.com/s?k=".concat(e.parametrize(t.movie.name),"&i=movies-tv"),t.movie.trailerLink="https://www.youtube.com/results?search_query=".concat(e.parametrize(t.movie.name),"+official+trailer")})}},{key:"fetchCredits",value:function(){var e=this;return this.tmdb.movieCredits(this.movie.tmdbId).then(function(t){e.movie.cast=t.cast.map(function(e){return{character:e.character,name:e.name}}),e.movie.crew=t.crew.map(function(e){return{job:e.job,name:e.name}})})}},{key:"movie",get:function(){return this._movie}},{key:"tmdb",get:function(){return this._tmdb}}],[{key:"parametrize",value:function(e){return e.toLowerCase().replace(/\s/g,"+")}}]),e}(),X=n(81),H=function(e){return e.movies},J=function(e){return{type:"ADD_MOVIE",payload:e}},Y=function e(t){return function(n,r){var i=function(e){return Object(X.a)(H,function(t){return t[e]})}(t)(r());new V(i).perform().then(function(e){e.progress=i.progress,n(J(e))}).catch(function(){return n(e(t))})}},$=function(){function e(t,n,r){Object(m.a)(this,e),this._show=t,this._season=n,this._episode=r,this._tmdb=new B}return Object(d.a)(e,[{key:"perform",value:function(){var t=this;return this.tmdb.episode(this.show.tmdbId,this.season.seasonNumber,this.episode.episodeNumber).then(function(n){return t.episode.state=I,t.episode.airDate=n.air_date,t.episode.name=n.name,t.episode.overview=n.overview,t.episode.affiliateLink="https://www.amazon.com/s?k=".concat(e.parametrize(t.show.name),"+").concat(e.parametrize(t.season.name),"+episode+").concat(t.episode.episodeNumber,"&i=movies-tv"),t.episode})}},{key:"show",get:function(){return this._show}},{key:"season",get:function(){return this._season}},{key:"episode",get:function(){return this._episode}},{key:"tmdb",get:function(){return this._tmdb}}],[{key:"parametrize",value:function(e){return e.toLowerCase().replace(/\s/g,"+")}}]),e}(),K=function(){function e(t,n){Object(m.a)(this,e),this._show=t,this._season=n,this._tmdb=new B}return Object(d.a)(e,[{key:"perform",value:function(){var e=Object(k.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchDetails(),this.fetchCredits()]);case 2:return e.abrupt("return",this.season);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=this;return this.tmdb.season(this.show.tmdbId,this.season.seasonNumber).then(function(t){return e.handleDetailsResponse(t)})}},{key:"fetchCredits",value:function(){var e=this;return this.tmdb.seasonCredits(this.show.tmdbId,this.season.seasonNumber).then(function(t){e.season.cast=t.cast.map(function(e){return{character:e.character,name:e.name}}),e.season.crew=t.crew.map(function(e){return{job:e.job,name:e.name}})})}},{key:"handleDetailsResponse",value:function(){var t=Object(k.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.season.state=I,this.season.airDate=n.air_date,this.season.name=n.name,this.season.overview=n.overview,this.season.posterUrl="https://image.tmdb.org/t/p/original".concat(n.poster_path),this.season.affiliateLink="https://www.amazon.com/s?k=".concat(e.parametrize(this.show.name),"+").concat(e.parametrize(this.season.name),"&i=movies-tv"),this.season.trailerLink="https://www.youtube.com/results?search_query=".concat(e.parametrize(this.show.name),"+").concat(e.parametrize(this.season.name),"+official+trailer&i=movies-tv"),t.next=9,this.mergeEpisodes(n.episodes);case 9:return this.season.episodes=t.sent,t.abrupt("return",this.season);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"mergeEpisodes",value:function(){var e=Object(k.a)(j.a.mark(function e(t){var n,r=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],n=void 0!==this.season.episodes?t.map(function(e){return Object(h.a)({tmdbId:e.id,episodeNumber:e.episode_number},r.season.episodes.filter(function(t){return t.episodeNumber===e.episode_number}).shift())}):t.map(function(e){return{tmdbId:e.id,episodeNumber:e.episode_number}}),e.next=4,Promise.all(n.map(function(e){return new Promise(function(t){setTimeout(function(){t(new $(r.show,r.season,e).perform())})})}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"show",get:function(){return this._show}},{key:"season",get:function(){return this._season}},{key:"tmdb",get:function(){return this._tmdb}}],[{key:"parametrize",value:function(e){return e.toLowerCase().replace(/\s/g,"+")}}]),e}(),Q=function(){function e(t){Object(m.a)(this,e),this._show=Object(h.a)({},t),this._tmdb=new B}return Object(d.a)(e,[{key:"perform",value:function(){var e=this;return this.tmdb.findShow(this.show.name).then(function(t){return e.show.tmdbId=t,e.fetch(),e.show})}},{key:"fetch",value:function(){var e=Object(k.a)(j.a.mark(function e(){var t=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tmdb.show(this.show.tmdbId).then(function(e){return t.handleResponse(e)});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleResponse",value:function(){var t=Object(k.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.show.state=I,this.show.backdropUrl="https://image.tmdb.org/t/p/original".concat(n.backdrop_path),this.show.firstAirDate=n.first_air_date,this.show.lastAirDate=n.last_air_date,this.show.name=n.name,this.show.overview=n.overview,this.show.posterUrl="https://image.tmdb.org/t/p/original".concat(n.poster_path),this.show.affiliateLink="https://www.amazon.com/s?k=".concat(e.parametrize(this.show.name)),t.next=10,this.mergeSeasons(n.seasons);case 10:this.show.seasons=t.sent;case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"mergeSeasons",value:function(){var e=Object(k.a)(j.a.mark(function e(t){var n,r=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(e){return Object(h.a)({tmdbId:e.id,seasonNumber:e.season_number},r.show.seasons.filter(function(t){return t.seasonNumber===e.season_number}).shift())}),e.next=3,Promise.all(n.map(function(e){return new Promise(function(t){setTimeout(function(){t(new K(r.show,e).perform())})})}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"show",get:function(){return this._show}},{key:"tmdb",get:function(){return this._tmdb}}],[{key:"parametrize",value:function(e){return e.toLowerCase().replace(/\s/g,"+")}}]),e}(),Z=function(e){return e.shows},ee=function(e){return{type:"ADD_SHOW",payload:e}},te=function e(t){return function(n,r){var i=function(e){return Object(X.a)(Z,function(t){return t[e]})}(t)(r());new Q(i).perform().then(function(e){e.seasons.forEach(function(e){e.episodes.forEach(function(t){var n=i.seasons.filter(function(t){return t.id===e.id});if(null!=n){var r=n.episodes.filter(function(e){return e.id===t.id});null!=r&&(t.progress=r.progress)}})}),n(ee(e))}).catch(function(){return n(e(t))})}},ne=function(){return function(e,t){e(re()),new G(t().auth.token).perform().then(function(n){var r=n.movies,i=n.shows,a={};Object.values(t().movies).forEach(function(e){return a[e.id]=e.progress}),e({type:"CLEAR_MOVIES"}),r.then(function(t){t.forEach(function(t){t.progress=a[t.id],e(J(t)),e(Y(t.id))})});var o={};Object.values(t().shows).forEach(function(e){e.seasons.forEach(function(e){e.episodes.forEach(function(e){return o[e.id]=e.progress})})}),e({type:"CLEAR_SHOWS"}),i.then(function(t){t.forEach(function(t){t.seasons.forEach(function(e){e.episodes.forEach(function(e){return e.progress=o[e.id]})}),e(ee(t)),e(te(t.id))})}),e(ie())}).catch(function(t){e(ae(t)),401===t.statusCode&&e(oe())})}},re=function(){return{type:"INDEX_BEGIN"}},ie=function(){return{type:"INDEX_SUCCESS"}},ae=function(e){return{type:"INDEX_FAILURE",payload:e}},oe=function(){return function(e){e(ce()),(new y).perform().then(function(t){e(ue(t)),e(ne())}).catch(function(t){return e(se(t))})}},ce=function(){return{type:"LOG_IN_BEGIN"}},ue=function(e){return{type:"LOG_IN_SUCCESS",payload:e}},se=function(e){return{type:"LOG_IN_FAILURE",payload:e}},fe={token:null,user:null,loading:!1,error:null},le={loading:!1,error:null},pe=n(48),he=Object(u.c)({auth:Object(f.a)({key:"auth",storage:p.a,whitelist:["token","user"],debug:!1},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN_BEGIN":return Object(h.a)({},e,{loading:!0,error:null});case"LOG_IN_SUCCESS":return Object(h.a)({},e,{token:t.payload.token,user:t.payload.user,loading:!1});case"LOG_IN_FAILURE":return Object(h.a)({},e,{loading:!1,error:t.payload});default:return e}}),indexing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INDEX_BEGIN":return Object(h.a)({},e,{loading:!0,error:null});case"INDEX_SUCCESS":return Object(h.a)({},e,{loading:!1});case"INDEX_FAILURE":return Object(h.a)({},e,{loading:!1,error:t.payload});default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MOVIE":return Object(h.a)({},e,Object(pe.a)({},t.payload.id,t.payload));case"CLEAR_MOVIES":return{};default:return e}},shows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SHOW":return Object(h.a)({},e,Object(pe.a)({},t.payload.id,t.payload));case"CLEAR_SHOWS":return{};default:return e}}}),me=Object(f.a)({key:"root",storage:p.a,whitelist:["movies","shows"],debug:!1},he),de=Object(u.d)(me,Object(u.a)(s.a)),ve=n(210),be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ye(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var we=n(12),Oe=n(11),ge=n(13),je=n(487),ke=n(489),_e=n(488),Ee=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ForYou"})}}]),t}(r.Component),xe=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){var t=e.match;return console.log(t.params.id),i.a.createElement("div",{className:"Movie"})}}]),t}(r.Component),Ie=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(e){var t=e.match;return i.a.createElement("div",{className:"Movies"},i.a.createElement(_e.a,{path:"".concat(t.path,"/:id"),component:xe}),i.a.createElement(_e.a,{exact:!0,path:t.path,render:function(){return i.a.createElement("h3",null,"Please select a movie.")}}))}}]),t}(r.Component),De=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Shows"})}}]),t}(r.Component),Ne=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Find"})}}]),t}(r.Component),Ce=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Welcome"})}}]),t}(r.Component),Ae=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"NotFound"})}}]),t}(r.Component),Se=n(212),Le=n.n(Se),Pe=(n(484),function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("track",{kind:"captions",label:this.props.caption.information,src:this.props.caption.url,srcLang:this.props.caption.srclang||"en",default:0===this.props.key})}}]),t}(r.Component)),Ue=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"continueWatching",value:function(){document.querySelector("button#continue").style.display="none",this.props.parent.player.play(),this.props.parent.player.currentTime=this.props.parent.props.item.progress}},{key:"render",value:function(){return 0===this.props.parent.props.item.progress?null:i.a.createElement("button",{id:"continue",onClick:this.continueWatching.bind(this)},"Continue watching")}}]),t}(r.Component),ze=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("source",{src:this.props.source.url,type:this.props.source.mimeType,size:this.props.source.information})}}]),t}(r.Component),Re=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.player=new Le.a("#player",{debug:!1}),this.player.on("play",function(){document.querySelector("button#continue")&&(document.querySelector("button#continue").style.display="none")}),this.player.on("timeupdate",function(t){0!==t.detail.plyr.currentTime&&(e.props.item.progress=t.detail.plyr.currentTime)})}},{key:"render",value:function(){return 0===this.props.item.files.filter(function(e){return"source"===e.type}).length?null:(console.log(this.props.item.files.filter(function(e){return"source"===e.type})[0].url),i.a.createElement("div",{className:"PlyrPlayer"},i.a.createElement("video",{poster:this.props.item.backdropUrl,src:this.props.item.files.filter(function(e){return"source"===e.type})[0].url,id:"player",crossOrigin:"true",playsInline:!0,controls:!0},this.props.item.files.filter(function(e){return"source"===e.type}).map(function(e,t){return i.a.createElement(ze,{source:e,key:t})}),this.props.item.files.filter(function(e){return"caption"===e.type}).map(function(e,t){return i.a.createElement(Pe,{caption:e,key:t})}),i.a.createElement("a",{href:this.props.item.files.filter(function(e){return"source"===e.type})[0].src,download:!0},"Download")),i.a.createElement(Ue,{parent:this})))}}]),t}(r.Component),qe=function(e){function t(e){var n;return Object(m.a)(this,t),n=Object(we.a)(this,Object(Oe.a)(t).call(this,e)),new y,n}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){if(this.props.user){var e=null;return Object.values(this.props.movies).filter(function(e){return"library"===e.role}).length>0&&(e=i.a.createElement(Re,{item:Object.values(this.props.movies).filter(function(e){return"library"===e.role})[0]})),i.a.createElement("div",{className:"App"},i.a.createElement("button",{onClick:this.props.index},"Index"),e,i.a.createElement(je.a,null,i.a.createElement(ke.a,null,i.a.createElement(_e.a,{path:"/",exact:!0,component:Ee}),i.a.createElement(_e.a,{path:"/movies",component:Ie}),i.a.createElement(_e.a,{path:"/shows",component:De}),i.a.createElement(_e.a,{path:"/find",component:Ne}),i.a.createElement(_e.a,{component:Ae}))))}return i.a.createElement("div",{className:"App"},i.a.createElement("button",{onClick:this.props.logIn},"Launch"),i.a.createElement(je.a,null,i.a.createElement(ke.a,null,i.a.createElement(_e.a,{path:"/",exact:!0,component:Ce}),i.a.createElement(_e.a,{component:Ae}))))}}]),t}(r.Component),Te=Object(c.b)(function(e){return{user:e.auth.user,movies:e.movies}},{logIn:oe,index:ne})(qe),We=function(e){function t(){return Object(m.a)(this,t),Object(we.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(ge.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Loading"})}}]),t}(r.Component);n(485);o.a.render(i.a.createElement(c.a,{store:de},i.a.createElement(ve.a,{loading:i.a.createElement(We,null),persistor:Object(f.b)(de)},i.a.createElement(Te,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");be?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ye(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ye(t,e)})}}()}},[[214,1,2]]]);
//# sourceMappingURL=main.0fe00dd2.chunk.js.map